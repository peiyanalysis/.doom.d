<div>
<h2>&#30446;&#24405;</h2>
<div>
<ul>
<li><a href="http://www.zmonster.me#orgheadline1" rel="noopener noreferrer" target="_blank">bt/backtrace</a></li>
<li><a href="http://www.zmonster.me#orgheadline2" rel="noopener noreferrer" target="_blank">&#25171;&#21360;&#25968;&#32452;&#20869;&#23481;</a></li>
<li><a href="http://www.zmonster.me#orgheadline3" rel="noopener noreferrer" target="_blank">&#35774;&#32622;&#28304;&#20195;&#30721;&#30446;&#24405;</a></li>
</ul>
</div>
</div>

<p>
&#20197;&#19979;&#26159;&#36825;&#20960;&#20010;&#26376;&#24037;&#20316;&#20197;&#26469;&#25152;&#23398;&#20064;&#21040;&#30340;GDB&#35843;&#35797;&#25216;&#24039;&#65292;&#34429;&#28982;&#24182;&#19981;&#20840;&#38754;&#65292;&#20294;&#25105;&#35748;&#20026;&#36824;&#26159;&#27604;&#36739;&#23454;&#29992;&#30340;&#19968;&#20123;&#19996;&#35199;&#12290;
</p>

<div>
<h2>bt/backtrace</h2>
<div>
<p>
&#36825;&#26465;&#21629;&#20196;&#21487;&#20197;&#22312;&#31243;&#24207;&#20986;&#38169;&#26102;&#25171;&#21360;&#20986;&#20989;&#25968;&#35843;&#29992;&#26632;&#65292;&#26041;&#20415;&#36861;&#36394;&#38382;&#39064;&#21457;&#29983;&#30340;&#25152;&#22312;&#12290;&#23545;&#20110;&#20195;&#30721;&#32467;&#26500;&#27604;&#36739;&#22797;&#26434;&#30340;&#39033;&#30446;&#65292;&#36825;&#26465;&#21629;&#20196;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#65292;&#25152;&#20197;&#36825;&#26465;&#21629;&#20196;&#20063;&#26159;&#24517;&#39035;&#25484;&#25569;&#30340;&#20102;&#12290;
</p>

<p>
&#27604;&#22914;&#23545;&#20110;&#19979;&#38754;&#36825;&#20010;&#31243;&#24207;:
</p>

<div>

<pre><span>#include</span> <span>&lt;stdio.h&gt;</span>

<span>int</span> <span>read_int</span>(<span>FILE</span> *<span>fp</span>)
{
    <span>int</span> <span>a</span> = 0;
    fscanf(fp, <span>"%d"</span>, &amp;a);
    <span>return</span> a;
}

<span>int</span> <span>main</span>(<span>int</span> <span>argc</span>, <span>char</span> *<span>argv</span>[])
{
    <span>FILE</span> *<span>file</span> = fopen(argv[1], <span>"r"</span>);
    <span>int</span> <span>a</span> = read_int(file);
    printf(<span>"read %d\n"</span>, a);
    fclose(file);
    <span>return</span> 0;
}
</pre>
</div>

<p>
&#35813;&#31243;&#24207;&#27809;&#26377;&#26816;&#26597;&#25991;&#20214;&#26159;&#21542;&#25171;&#24320;&#25104;&#21151;&#65292;&#20415;&#36827;&#34892;&#35835;&#25991;&#20214;&#25805;&#20316;&#65292;&#22312;&#25991;&#20214;&#25171;&#24320;&#22833;&#36133;&#30340;&#26102;&#20505;&#65292;&#23558;&#20250;&#21457;&#29983;&#27573;&#38169;&#35823;&#12290;
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/sf-test.png" alt="sf-test.png" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
&#36825;&#20010;&#26102;&#20505;&#23601;&#21487;&#20197;&#29992;backtrace/bt &#21629;&#20196;&#26469;&#21457;&#29616;&#26159;&#21738;&#37324;&#20986;&#20102;&#38382;&#39064;&#65306;
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/gdb-backtrace.png" alt="gdb-backtrace.png" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>
</div>
</div>

<div>
<h2>&#25171;&#21360;&#25968;&#32452;&#20869;&#23481;</h2>
<div>
<p>
&#22312;GDB&#20013;&#65292;&#22914;&#26524;&#22312;&#25968;&#32452;&#30340;&#23450;&#20041;&#25152;&#22312;&#30340;&#20989;&#25968;&#20869;&#26597;&#30475;&#25968;&#32452;&#20869;&#23481;&#65292;&#30452;&#25509;&#35843;&#29992;print&#21629;&#20196;&#21363;&#21487;&#65292;&#22914;&#65292;&#23545;&#19979;&#38754;&#30340;&#20195;&#30721;&#65306;
</p>

<div>

<pre><span>#include</span> <span>&lt;stdio.h&gt;</span>

<span>void</span> <span>add_one</span>(<span>int</span> *<span>arr</span>, <span>int</span> <span>len</span>)
{
    <span>int</span> <span>i</span> = 0;
    <span>for</span> (i = 0; i &lt; len; ++i) {
        arr[i] = arr[i] + 1;
    }
}

<span>int</span> <span>main</span>(<span>int</span> <span>argc</span>, <span>char</span> *<span>argv</span>[])
{
    <span>int</span> <span>a</span>[] = {1, 2, 3, 4, 5, 6, 7};

    add_one(a, 7);

    <span>return</span> 0;
}
</pre>
</div>

<p>
&#22312;&#20989;&#25968;&#35843;&#29992;
</p>
<div>

<pre>add_one(a, 7);
</pre>
</div>

<p>
&#21069;&#25191;&#34892;"p a"&#65292;&#24471;&#21040;&#30340;&#32467;&#26524;&#22914;&#19979;&#65306;
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/gdb-print-array.png" alt="gdb-print-array.png" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
&#20294;&#22914;&#26524;step&#36827;&#20837;&#20989;&#25968; <b>add_one</b> &#65292;&#25191;&#34892;"print arr"&#65292;&#24471;&#21040;&#30340;&#21364;&#26159;&#36825;&#20010;&#32467;&#26524;&#20102;&#65306;
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/gdb-print-array2.png" alt="gdb-print-array2.png" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
&#36825;&#26159;&#22240;&#20026;&#22312;&#20989;&#25968; <b>add_one</b> &#20013;&#65292;&#25968;&#32452;&#30340;&#25351;&#38024; <b>a</b> &#20316;&#20026;&#21442;&#25968;&#20256;&#20837;&#21518;&#36864;&#21270;&#20026;&#20102;&#26222;&#36890;&#25351;&#38024;&#20102;&#65292;&#36825;&#20010;&#26102;&#20505;&#22914;&#26524;&#35201;&#25105;&#20204;&#25163;&#21160;&#19968;&#20010;&#19968;&#20010;&#25171;&#21360;&#26469;&#26597;&#30475;&#65292;&#37027;&#26080;&#30097;&#26159;&#24456;&#30171;&#33510;&#30340;&#12290;&#20294;&#22312;GDB&#20013;&#26377;&#26597;&#30475;&#36825;&#26679;&#30340;&#36830;&#32493;&#20869;&#23384;&#25968;&#25454;&#30340;&#26041;&#27861;&#65292;&#32780;&#19988;&#26377;&#22810;&#31181;&#65292;&#22914;&#19979;&#65306;
</p>

<ol>
<li><p>
print *arr@7 / p *arr@7
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/gdb-print-array3.png" alt="gdb-print-array3.png" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
&#19981;&#31649;&#25351;&#38024;&#25351;&#21521;&#30340;&#20869;&#23384;&#20013;&#23384;&#20648;&#30340;&#26159;&#22522;&#26412;&#31867;&#22411;&#30340;&#25968;&#25454;&#36824;&#26159;&#33258;&#23450;&#20041;&#30340;&#31867;&#22411;&#65292;&#36825;&#20010;&#26041;&#27861;&#37117;&#36866;&#29992;&#12290;
</p></li>

<li><p>
print (int [&#8203;7])*arr / p (int [&#8203;7])*arr
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/gdb-print-array4.png" alt="gdb-print-array4.png" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
&#21516;&#19978;&#65292;&#20294;&#22312;&#25805;&#20316;&#19978;&#35201;&#40635;&#28902;&#19968;&#28857;&#12290;
</p></li>

<li><p>
x/7dw arr
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/gdb-print-array5.png" alt="gdb-print-array5.png" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
<b>x</b> &#26159;GDB&#20013;&#29992;&#26469;&#26816;&#26597;&#20869;&#23384;&#30340;&#21629;&#20196;&#65292;&#20854;&#20351;&#29992;&#26041;&#27861;&#26159;&#65306;
</p>
<pre>
x/nfu addr
</pre>
<p>
&#20854;&#20013; <b>n</b> &#34920;&#31034;&#35201;&#37325;&#22797;&#25171;&#21360;&#30340;&#27425;&#25968;&#65292;&#40664;&#35748;&#20540;&#20026;1;*f* &#34920;&#31034;&#36755;&#20986;&#30340;&#26684;&#24335;&#65292;&#25903;&#25345; x(&#21313;&#20845;&#36827;&#21046;)&#12289;d(&#21313;&#36827;&#21046;)&#12289; u(&#26080;&#31526;&#21495;&#25972;&#22411;)&#12289; o(&#20843;&#36827;&#21046;)&#12289;t(&#20108;&#36827;&#21046;)&#12289;a(&#22320;&#22336;&#20540;)&#12289;c(&#23383;&#31526;&#22411;)&#12289;f(&#28014;&#28857;&#22411;)&#12289;s(&#23383;&#31526;&#20018;)&#36825;&#20960;&#31181;&#26684;&#24335;&#65292;&#40664;&#35748;&#20351;&#29992; <b>x</b> ;u&#34920;&#31034;&#27599;&#20010;&#36755;&#20986;&#30340;&#23485;&#24230;&#65292;&#21487;&#20197;&#36873;&#25321;b(1&#23383;&#33410;)&#12289;h(2&#23383;&#33410;)&#12289;w(4&#23383;&#33410;)&#21644;g(8&#23383;&#33410;)&#65292;&#40664;&#35748;&#20026;4&#23383;&#33410;(w)&#12290;
</p>

<p>
&#19981;&#36807;&#23545;&#20110;&#33258;&#23450;&#20041;&#30340;&#22797;&#26434;&#31867;&#22411;&#65292;&#36825;&#20010;&#26041;&#27861;&#24182;&#19981;&#22909;&#29992;&#12290;
</p></li>
</ol>
</div>
</div>

<div>
<h2>&#35774;&#32622;&#28304;&#20195;&#30721;&#30446;&#24405;</h2>
<div>
<p>
&#26377;&#26102;&#20505;&#23384;&#22312;&#36825;&#26679;&#30340;&#24773;&#20917;&#65292;&#31243;&#24207;&#36816;&#34892;&#30340;&#26426;&#22120;&#21644;&#28304;&#20195;&#30721;&#25152;&#22312;&#30340;&#26426;&#22120;&#19981;&#26159;&#21516;&#19968;&#21488;&#26426;&#22120;&#65292;&#20551;&#22914;&#31243;&#24207;&#23849;&#28291;&#20102;&#65292;&#22240;&#20026;&#27809;&#26377;&#28304;&#20195;&#30721;&#65292;&#20063;&#21482;&#33021;&#22823;&#33268;&#30693;&#36947;&#26159;&#22312;&#20160;&#20040;&#22320;&#26041;&#20986;&#38169;&#20102;&#65292;&#20294;&#21364;&#27809;&#26377;&#21150;&#27861;&#35814;&#26597;&#12290;&#24403;&#28982;&#65292;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#19968;&#20010;&#24456;&#31528;&#30340;&#21150;&#27861;&#26159;&#65292;&#25226;&#25972;&#20010;&#39033;&#30446;&#20195;&#30721;&#25343;&#36807;&#26469;&#65292;&#37197;&#32622;&#22909;&#32534;&#35793;&#29615;&#22659;&#65292;&#28982;&#21518;&#29992;&#32534;&#35793;&#22909;&#30340;&#31243;&#24207;&#26367;&#25442;&#21407;&#26469;&#30340;&#31243;&#24207;&#65292;&#20877;&#36827;&#34892;&#35843;&#35797;&#12290;
</p>

<p>
&#20294;&#26159;&#36825;&#26679;&#23454;&#22312;&#26159;&#24456;&#40635;&#28902;&#12290;
</p>

<p>
&#25105;&#20204;&#26159;&#21487;&#20197;&#36825;&#26679;&#30340;&#65292;&#39318;&#20808;&#23450;&#20301;&#38382;&#39064;&#21457;&#29983;&#30340;&#20195;&#30721;&#33539;&#22260;(&#28041;&#21450;&#21040;&#21738;&#20123;&#28304;&#25991;&#20214;)&#65292;&#24182;&#25226;&#36825;&#20123;&#28041;&#21450;&#30340;&#28304;&#25991;&#20214;&#25335;&#36125;&#36807;&#26469;&#65292;&#28982;&#21518;&#22312;GDB&#35843;&#35797;&#26102;&#25351;&#23450;&#28304;&#20195;&#30721;&#30446;&#24405;&#23601;OK&#20102;&#12290;
</p>

<p>
&#25351;&#23450;&#28304;&#20195;&#30721;&#30446;&#24405;&#26377;&#20004;&#31181;&#26041;&#24335;&#65306;
</p>
<ol>
<li>&#22312;&#21551;&#21160;&#26102;&#20351;&#29992; <b>-d</b> &#36873;&#39033;&#35774;&#32622;</li>
<li>&#22312;&#21551;&#21160;&#21518;&#20351;&#29992; <b>directory</b> &#21629;&#20196;&#35774;&#32622;</li>
</ol>


<p>
&#24403;&#28982;&#20102;&#65292;&#26368;&#21518;&#35828;&#19968;&#19979;&#65292;&#20687;&#36825;&#31181;&#36328;&#26426;&#22120;&#30340;&#35843;&#35797;&#65292;&#26368;&#22909;&#26159;&#22312;&#36816;&#34892;&#26426;&#22120;&#19978;&#35774;&#32622;&#22909;&#33021;&#29983;&#25104;core&#25991;&#20214;&#65292;&#21542;&#21017;&#35201;&#37325;&#29616;&#38382;&#39064;&#21487;&#33021;&#35201;&#33457;&#36153;&#19968;&#30058;&#21151;&#22827;&#12290;&#25171;&#24320;core dump&#30340;&#26041;&#27861;&#26159;&#25191;&#34892;&#65306;
</p>
<pre>
ulimit -c unlimited
</pre>
<p>
&#24403;&#28982;&#65292;&#22312;shell&#20013;&#25191;&#34892;&#36825;&#20010;&#21482;&#26159;&#20250;&#26242;&#26102;&#29983;&#25928;&#65292;&#22914;&#26524;&#38656;&#35201;&#22312;&#30331;&#24405;&#30340;&#26102;&#20505;&#29983;&#25928;&#65292;&#24212;&#35813;&#25226;&#36825;&#26465;&#35821;&#21477;&#20889;&#21040; .bashrc &#36825;&#20010;&#25991;&#20214;&#20013;&#21435;&#12290;
</p>
</div>
</div>