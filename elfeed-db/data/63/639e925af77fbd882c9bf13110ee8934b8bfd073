<div>
<h2>&#30446;&#24405;</h2>
<div>
<ul>
<li><a href="http://www.zmonster.me#orgheadline1" rel="noopener noreferrer" target="_blank">What is process substitution?</a></li>
<li><a href="http://www.zmonster.me#orgheadline2" rel="noopener noreferrer" target="_blank">Process substitution on Linux</a></li>
<li><a href="http://www.zmonster.me#orgheadline3" rel="noopener noreferrer" target="_blank">Some more</a></li>
</ul>
</div>
</div>
<div>
<h2>What is process substitution?</h2>
<div>
<p>
"Process Substitution"&#65292;&#25105;&#23558;&#20043;&#32763;&#35793;&#20026;"&#36827;&#31243;&#26367;&#20195;"&#65292;&#19981;&#30693;&#36947;&#26377;&#27809;&#26377;&#26356;&#30456;&#24212;&#30340;&#19987;&#19994;&#20013;&#25991;&#32763;&#35793;&#65292;&#22993;&#19988;&#20808;&#29992;&#30528;&#22909;&#20102;&#12290;&#23427;&#20801;&#35768;&#29992;&#23558;&#21629;&#20196;&#30340;&#36755;&#20986;&#32467;&#26524;&#24403;&#20316;"&#25991;&#20214;"&#26469;&#20351;&#29992;&mdash;&mdash;&#36825;&#21477;&#35805;&#30340;&#24847;&#24605;&#26159;&#36825;&#26679;&#30340;&#65292;&#20551;&#35774;&#20320;&#26377;&#19968;&#20010;&#24037;&#20855;&#65292;&#23427;&#21407;&#26412;&#25509;&#21463;&#30340;&#21442;&#25968;&#24212;&#35813;&#26159;&#19968;&#20010;&#25351;&#20195;&#26576;&#20010;&#20855;&#20307;&#25991;&#26723;&#30340;"&#25991;&#20214;&#21517;"&#65292;&#20351;&#29992;"&#36827;&#31243;&#26367;&#20195;"&#21518;&#65292;&#25105;&#20204;&#21487;&#20197;&#29992;&#20854;&#20182;&#21629;&#20196;&#30340;&#36755;&#20986;&#26469;&#20316;&#20026;&#25991;&#20214;&#30340;&#20869;&#23481;&#65292;&#35753;&#36825;&#20010;&#24037;&#20855;&#21435;&#22788;&#29702;&#12290;
</p>

<p>
&#35828;&#24471;&#27604;&#36739;&#32469;&#65292;&#20808;&#30475;&#30475; Wikipedia &#19978;&#30340;&#35299;&#37322;:
</p>
<pre>
In computing, process substitution is a form of inter-process communication that allows the input or output of a command to appear as a file. The command is substituted in-line, where a file name would normally occur, by the command shell. This allows programs that normally only accept files to directly read from or write to another program.
</pre>
</div>
</div>

<div>
<h2>Process substitution on Linux</h2>
<div>
<p>
&#22312;Linux&#19978;&#65292;&#36890;&#36807;&#19979;&#38754;&#30340;&#24418;&#24335;&#20351;&#29992; process substituion:
</p>
<div>

<pre>&lt;(&lt;some command&gt; &lt;args&gt;)
</pre>
</div>

<p>
&#19979;&#38754;&#29992;&#19968;&#20010;&#23454;&#38469;&#30340;&#20363;&#23376;&#26469;&#35828;&#26126;&#23427;&#30340;&#20351;&#29992;&#12290;
</p>

<p>
&#20197;&#25105;&#30340;&#24037;&#20316;&#20026;&#20363;&#65292;&#23545;&#20110;&#19968;&#20010;&#27979;&#35797;&#38598;&#65292;&#22312;&#36827;&#34892;&#23436; Speaker Diarization &#21518;&#65292;&#20250;&#26681;&#25454;&#26631;&#27880;&#25991;&#20214;(&#21363;&#29992;&#20316;&#21442;&#29031;&#30340;&#26631;&#20934;&#32467;&#26524;)&#35745;&#31639;&#23427;&#30340;&#38169;&#35823;&#29575;&#65292;&#32780; Speaker Diarization &#30340;&#38169;&#35823;&#29575;&#30001;&#19977;&#37096;&#20998;&#32452;&#25104;:
</p>
<ul>
<li>Missed speech</li>
<li>False alarm speech</li>
<li>Speaker error</li>
</ul>

<p>
&#35835;&#32773;&#19981;&#24517;&#23545;&#36825;&#20123;&#35789;&#30340;&#20855;&#20307;&#21547;&#20041;&#21435;&#28145;&#31350;&#65292;&#21482;&#35201;&#30693;&#36947;&#26159;&#19968;&#20010;&#38169;&#35823;&#29575;&#30340;&#32479;&#35745;&#65292;&#21516;&#26102;&#24635;&#20307;&#38169;&#35823;&#30001;&#19977;&#20010;&#25104;&#20998;&#32452;&#25104;&#23601;&#34892;&#20102;&#12290;
</p>

<p>
&#22312;&#35745;&#31639;&#20102;&#38169;&#35823;&#29575;&#20043;&#21518;&#65292;&#20250;&#23558;&#32479;&#35745;&#32467;&#26524;&#35760;&#24405;&#22312;&#19968;&#20010;&#25991;&#20214;&#20013;&#65292;&#22312;&#36825;&#20010;&#25991;&#20214;&#20013;&#65292;&#27599;&#19968;&#34892;&#37117;&#19968;&#20010;&#38899;&#39057;&#30340;&#27979;&#35797;&#32467;&#26524;&#65292;&#24418;&#24335;&#22914;&#19979;:
</p>
<pre>
1.wav Miss = 2.9 False = 3.4 Speaker = 1.0 Total = 7.3
</pre>

<p>
&#29616;&#22312;&#25105;&#20204;&#26377;&#20004;&#20010;&#36825;&#26679;&#30340;&#25991;&#20214;&#65292;&#26159;&#23545;&#21516;&#19968;&#25209;&#27979;&#35797;&#38598;&#36827;&#34892;&#20102;&#20004;&#27425;&#27979;&#35797;&#21518;&#24471;&#21040;&#30340;&#32467;&#26524;&#65292;&#31532;&#19968;&#20010;&#25991;&#20214; 2015-05-31-der.log &#30340;&#20869;&#23481;&#22914;&#19979;:
</p>
<pre>
1.wav Miss = 2.9 False = 3.4 Speaker = 1.0 Total = 7.3
2.wav Miss = 1.0 False = 2.5 Speaker = 0.0 Total = 3.5
3.wav Miss = 2.7 False = 1.1 Speaker = 0.1 Total = 3.9
</pre>

<p>
&#31532;&#20108;&#20010;&#25991;&#20214; 2015-06-22-der.log &#30340;&#20869;&#23481;&#22914;&#19979;:
</p>
<pre>
2.wav Miss = 0.5 False = 2.2 Speaker = 0.9 Total = 3.6
1.wav Miss = 2.8 False = 0.0 Speaker = 0.0 Total = 2.8
3.wav Miss = 2.4 False = 1.3 Speaker = 0.4 Total = 4.1
</pre>

<p>
(&#27880;: &#20197;&#19978;&#25968;&#25454;&#32431;&#23646;&#26460;&#25776;&#65292;&#19982;&#25105;&#30446;&#21069;&#24037;&#20316;&#20013;&#30340;&#23454;&#38469;&#38169;&#35823;&#29575;&#24773;&#20917;&#27809;&#26377;&#20219;&#20309;&#20851;&#31995;)
</p>

<p>
&#25105;&#38656;&#35201;&#26681;&#25454;&#36825;&#20004;&#20010;&#25991;&#20214;&#65292;&#24471;&#21040;&#27599;&#20010;&#38899;&#39057;&#22312;&#20004;&#27425;&#27979;&#35797;&#20013;&#21508;&#20010;&#25104;&#20998;&#30340;&#23545;&#27604;&#24773;&#20917;&#65292;&#24076;&#26395;&#36755;&#20986;&#30340;&#27599;&#19968;&#34892;&#26159;&#36825;&#26679;&#30340;:
</p>
<pre>
1.wav Miss = 2.9 False = 3.4 Speaker = 1.0 Total = 7.3 | Miss = 2.8 False = 0.0 Speaker = 0.0 Total = 2.8
</pre>

<p>
&#27604;&#36739;&#23481;&#26131;&#24819;&#21040;&#38656;&#35201;&#26681;&#25454;&#25991;&#20214;&#21517;&#36827;&#34892; sort &#65292;&#28982;&#21518;&#20351;&#29992; paste &#25226;&#20004;&#20010;&#25991;&#20214;&#25340;&#25509;&#36215;&#26469;&#65292;&#37027;&#20040;&#24456;&#33258;&#28982;&#22320;&#21487;&#20197;&#36825;&#26679;&#20889;:
</p>
<div>

<pre>sort -k1,1 2015-05-31-der.log &gt; 2015-05-31-der-sorted.log
sort -k1,1 2015-06-22-der.log | cut -d <span>' '</span> -f 2- &gt; 2015-06-22-der-sorted.log
paste -d <span>'|'</span> 2015-05-31-der-sorted.log 2015-06-22-der-sorted.log
rm *-sorted.log
</pre>
</div>

<p>
&#20351;&#29992;&#36827;&#31243;&#26367;&#20195;&#30340;&#35805;&#65292;&#25105;&#21487;&#20197;&#29992;&#19968;&#34892;&#23601;&#25630;&#23450;&#65292;&#32780;&#19988;&#19981;&#38656;&#35201;&#29983;&#25104;&#20020;&#26102;&#25991;&#20214;:
</p>
<div>

<pre>paste -d <span>'|'</span> &lt;(sort -k1,1 2015-05-31-der.log) &lt;(sort -k1,1 2015-06-22-der.log | cut -d <span>' '</span> -f 2-)
</pre>
</div>

<p>
&#21478;&#22806;&#19968;&#20010;&#20363;&#23376;&#65292;&#23601;&#26159;&#20351;&#29992; diff &#27604;&#36739;&#20004;&#20010;&#25991;&#20214;&#20869;&#23481;&#30340;&#26102;&#20505;&#65292;&#32780;&#19988;&#25105;&#20204;&#20851;&#24515;&#30340;&#26159;&#26576;&#20010;&#25991;&#20214;&#20013;&#26576;&#20010;&#35760;&#24405;&#22312;&#21478;&#22806;&#19968;&#20010;&#25991;&#20214;&#20013;&#26377;&#27809;&#26377;&#65292;&#19981;&#24076;&#26395;&#21463;&#27425;&#24207;&#24433;&#21709;&#26102;&mdash;&mdash;diff&#26159;&#25353;&#34892;&#26469;&#36827;&#34892;&#25991;&#20214;&#20869;&#23481;&#23545;&#27604;&#30340;&#12290;&#36824;&#26159;&#26469;&#20551;&#35774;&#19968;&#20010;&#22330;&#26223;&#21543;&#12290;
</p>

<p>
&#20551;&#35774;&#25105;&#21644;&#25105;&#30340;&#19968;&#20010;&#26379;&#21451;&#21508;&#33258;&#20986;&#21435;&#36141;&#29289;&#65292;&#23436;&#20102;&#22238;&#26469;&#24819;&#27604;&#36739;&#19968;&#19979;&#25105;&#20204;&#36141;&#20080;&#19996;&#35199;&#30340;&#21306;&#21035;:&#25105;&#20080;&#30340;&#19996;&#35199;&#37324;&#38754;&#21738;&#20123;&#20182;&#27809;&#26377;&#20080;&#65292;&#20182;&#20080;&#30340;&#21738;&#20123;&#25105;&#27809;&#26377;&#20080;&#12290;
</p>

<p>
&#25105;&#30340;&#36141;&#29289;&#28165;&#21333;&#26159; shopping-list-1.txt &#65292;&#20869;&#23481;&#22914;&#19979;:
</p>
<pre>
&#33529;&#26524;
&#19978;&#34915;
&#27611;&#24062;
&#32819;&#26426;
&#26080;&#32447;&#38190;&#30424;
</pre>

<p>
&#25105;&#26379;&#21451;&#30340;&#36141;&#29289;&#28165;&#21333;&#26159; shopping-list-2.txt &#65292;&#20869;&#23481;&#22914;&#19979;:
</p>
<pre>
&#32819;&#26426;
&#33529;&#26524;
&#26080;&#32447;&#38190;&#30424;
&#31185;&#24187;&#23567;&#35828;
&#20116;&#21495;&#30005;&#27744;
&#20307;&#37325;&#31204;
&#31227;&#21160;&#30005;&#28304;
</pre>

<p>
&#37027;&#20040;&#30456;&#27604;&#19981;&#29992;&#36827;&#31243;&#26367;&#20195;&#30340;&#20256;&#32479;&#21150;&#27861;&#65292;&#20351;&#29992;&#36827;&#31243;&#26367;&#20195;&#30340;&#21150;&#27861;&#20250;&#31616;&#21333;&#24456;&#22810;&#65292;&#19968;&#34892;&#25630;&#23450;:
</p>
<div>

<pre>diff &lt;(sort shopping-list-1.txt) &lt;(sort shopping-list-2.txt)
</pre>
</div>

<p>
&#32467;&#26524;&#22914;&#19979;:
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/diff-result.png" alt="diff-result.png" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
&#21487;&#20197;&#30475;&#21040;&#65292;&#25105;&#20080;&#20102;&#32780;&#25105;&#26379;&#21451;&#27809;&#20080;&#30340;&#19996;&#35199;&#26159;:
</p>
<pre>
&#27611;&#24062;
&#19978;&#34915;
</pre>

<p>
&#25105;&#26379;&#21451;&#20080;&#20102;&#32780;&#25105;&#27809;&#20080;&#30340;&#19996;&#35199;&#26159;:
</p>
<pre>
&#31185;&#24187;&#23567;&#35828;
&#20307;&#37325;&#31204;
&#20116;&#21495;&#30005;&#27744;
&#31227;&#21160;&#30005;&#28304;
</pre>
</div>
</div>

<div>
<h2>Some more</h2>
<div>
<p>
&#23454;&#38469;&#19978;&#65292;&#36827;&#31243;&#26367;&#20195;&#20063;&#19981;&#26159;&#20160;&#20040;&#24456;&#26032;&#22855;&#30340;&#19996;&#35199;&#65292;Wikipedia &#19978;&#35828;&#65292;&#23427;&#26159;&#36827;&#31243;&#38388;&#36890;&#20449;&#30340;&#19968;&#31181;&#26041;&#24335;&#65292;&#20107;&#23454;&#19978;&#20063;&#30830;&#23454;&#26159;&#36825;&#26679;&#12290;&#22312; Linux &#19978;&#20351;&#29992;&#36827;&#31243;&#26367;&#20195;&#30340;&#26102;&#20505;&#65292;&#31995;&#32479;&#20250;&#21019;&#24314;&#19968;&#20010;&#20020;&#26102;&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;&#65292;&#28982;&#21518;&#23558;&#29992;&#20197;&#26367;&#20195;&#30340;&#36827;&#31243;&#30340;&#36755;&#20986;&#21644;&#36825;&#20010;&#25991;&#20214;&#25551;&#36848;&#31526;&#20851;&#32852;&#36215;&#26469;&#65292;&#36825;&#20010;&#21487;&#20197;&#36890;&#36807;&#20197;&#19979;&#21629;&#20196;&#26469;&#39564;&#35777;:
</p>

<div>

<pre><span>echo</span> &lt;(sort shopping-list-1.txt)
</pre>
</div>

<p>
&#19981;&#20986;&#24847;&#22806;&#65292;&#24212;&#35813;&#20250;&#30475;&#21040;&#36825;&#26679;&#30340;&#36755;&#20986;:
</p>
<pre>
/dev/fd/63
</pre>

<p>
"fd"&#23601;&#26159;&#25991;&#20214;&#25551;&#36848;&#29238;(File Description)&#30340;&#32553;&#20889;&#65292;&#20294;&#20320;&#21435;/dev/fd/&#19979;&#38754;&#25214;&#36825;&#20010;&#25991;&#20214;&#25551;&#36848;&#31526;&#65292;&#21364;&#20250;&#21457;&#29616;&#25214;&#19981;&#21040;&#65292;&#37027;&#26159;&#22240;&#20026;&#36825;&#20010;&#25991;&#20214;&#25551;&#36848;&#31526;&#26159;&#20020;&#26102;&#30340;&#65292;&#22312;&#20256;&#32473;"echo"&#21629;&#20196;&#21518;&#23601;&#34987;&#37322;&#25918;&#20102;&#12290;
</p>

<p>
&#27492;&#22806;&#65292;&#36827;&#31243;&#26367;&#20195;&#24182;&#19981;&#33021;&#21644;&#25991;&#20214;&#23436;&#20840;&#31561;&#20215;&#65292;&#36825;&#19968;&#28857;&#35201;&#20999;&#35760;&#12290;&#36827;&#31243;&#26367;&#20195;&#25152;&#24314;&#31435;&#30340;"&#23545;&#35937;"&#65292;&#26159;&#19981;&#33021;&#36827;&#34892;&#20889;&#20837;&#21644;&#38543;&#26426;&#35835;&#21462;&#25805;&#20316;&#30340;&#12290;&#19981;&#33021;&#20889;&#20837;&#30340;&#35805;&#24212;&#35813;&#24456;&#22909;&#29702;&#35299;&#65292;&#22240;&#20026;&#22914;&#26524;&#36827;&#34892;&#20889;&#25805;&#20316;&#65292;&#23558;&#20250;&#20889;&#21040;&#37027;&#20010;&#20020;&#26102;&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;&#37324;&#38754;&#21435;&#65292;&#32780;&#36825;&#20010;&#20020;&#26102;&#25991;&#20214;&#25551;&#36848;&#31526;&#20250;&#34987;&#36805;&#36895;&#22320;&#37322;&#25918;&#25481;&#65292;&#32780;&#19988;&#30001;&#20110;&#21019;&#24314;&#30340;&#36825;&#20010;"&#25991;&#20214;"&mdash;&mdash;&#22993;&#19988;&#36825;&#20040;&#31216;&#21628;&#65292;&#19981;&#26159;&#19968;&#20010; regular file (&#19982;&#20043;&#30456;&#23545;&#30340;&#26159; special file)&#65292;&#22914;&#26524;&#22312;&#20889;&#20837;&#26102;&#26377;&#20005;&#26684;&#30340;&#26816;&#26597;&#65292;&#29978;&#33267;&#36830;&#20889;&#20837;&#37117;&#20250;&#34987;&#25298;&#32477;&#65307;&#26377;&#26102;&#20505;&#25105;&#20204;&#38656;&#35201;&#23545;&#25991;&#20214;&#36827;&#34892;&#38543;&#26426;&#35835;&#21462;&#65292;&#27604;&#22914; C &#35821;&#35328;&#37324;&#30340; fseek() &#20989;&#25968;&#30340;&#25805;&#20316;&#65292;&#36825;&#26679;&#30340;&#25805;&#20316;&#23558;&#19981;&#33021;&#22312;&#36827;&#31243;&#26367;&#20195;&#20135;&#29983;&#30340;&#20020;&#26102;&#23545;&#35937;&#19978;&#27491;&#24120;&#36816;&#20316;&#12290;
</p>

<p>
&#24635;&#30340;&#26469;&#35828;&#65292;&#25105;&#20010;&#20154;&#26159;&#24456;&#21916;&#27426;&#36825;&#20010;&#21151;&#33021;&#30340;&#65292;&#20943;&#23569;&#20102;&#22788;&#29702;&#25968;&#25454;&#26102;&#19981;&#23569;&#30340;&#24037;&#20316;&#37327;&#12290;
</p>

<p>
That's it!
</p>
</div>
</div>