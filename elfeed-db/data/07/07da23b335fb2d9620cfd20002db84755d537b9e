<p>
&#26368;&#36817;&#22312;&#20026;&#20844;&#21496;&#19968;&#20010;&#39033;&#30446;&#30340;&#19968;&#20010;&#27169;&#22359;&#20889;API&#65292;&#22312;API&#22522;&#26412;&#23436;&#25104;&#21518;&#65292;&#25105;&#20889;&#20102;&#20960;&#20010;demo&#25226;&#21508;&#31181;&#24773;&#20917;&#27979;&#35797;&#20102;&#19968;&#19979;&#12290;&#36890;&#36807;&#31616;&#21333;&#27979;&#35797;&#21518;&#65292;&#19968;&#26102;&#20852;&#36215;&#65292;&#29992;valgrind&#36827;&#34892;&#20102;&#19968;&#19979;&#20869;&#23384;&#26816;&#26597;&#65292;&#30495;&#26159;&#19981;&#30475;&#19981;&#30693;&#36947;&#65292;&#19968;&#30475;&#21523;&#19968;&#36339;&#12290;
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/mem-leak.jpg" alt="mem-leak.jpg" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
&#24403;&#26102;&#20026;&#20102;&#26356;&#24555;&#22320;&#30475;&#21040;&#32467;&#26524;&#65292;&#21482;&#25343;&#20102;&#19968;&#20010;&#23567;&#30340;&#38899;&#39057;&#25991;&#20214;&#26469;&#36827;&#34892;&#22788;&#29702;&#65292;&#22823;&#27010;&#23601;&#20960;&#30334;&#20010;KB&#21543;&#65292;&#28982;&#21518;&#20869;&#23384;&#27844;&#28431;&#30340;&#37327;&#23601;&#36798;&#21040;&#20102;3,481,396&#20010;&#23383;&#33410;&#65281;
</p>

<p>
&#33457;&#20102;&#19968;&#20004;&#22825;&#30340;&#26102;&#38388;&#65292;&#20511;&#21161;valgrind&#20197;&#21450;&#20195;&#30721;&#38405;&#35835;&#24037;&#20855;(sublime text + ctags)&#65292;&#25105;&#21457;&#29616;&#20102;&#20869;&#23384;&#27844;&#28431;&#30340;&#28304;&#22836;&#12290;
</p>

<p>
&#19968;&#26041;&#38754;&#65292;&#26377;&#39033;&#30446;&#26412;&#36523;&#30340;&#20195;&#30721;&#32534;&#20889;&#19981;&#35268;&#33539;&#23548;&#33268;&#30340;&#27844;&#28431;&#65307;&#21478;&#19968;&#26041;&#38754;&#65292;&#20063;&#26377;&#39033;&#30446;&#20351;&#29992;&#30340;&#24320;&#28304;&#24211;&#33258;&#36523;&#30340;&#38382;&#39064;&#12290;
</p>

<p>
&#39033;&#30446;&#26412;&#36523;&#23384;&#22312;&#30340;&#38382;&#39064;&#26377;&#65306;
</p>
<ol>
<li>new/delete &#25805;&#20316;&#19981;&#25104;&#23545;</li>
<li>&#25335;&#36125;&#26500;&#36896;&#20989;&#25968;/&#36171;&#20540;&#36816;&#31639;&#31526;&#37325;&#36733; &#22312;&#36827;&#34892;&#25335;&#36125;&#26102;&#21482;&#36827;&#34892;&#20102;&#27973;&#25335;&#36125;</li>
</ol>


<p>
&#39033;&#30446;&#26412;&#36523;&#30340;&#38382;&#39064;&#19981;&#22826;&#22810;&#65292;&#32780;&#19988;&#23481;&#26131;&#21457;&#29616;&#65292;&#25152;&#20197;&#34987;&#25105;&#20248;&#20808;&#35299;&#20915;&#20102;&#65292;&#27492;&#26102;&#20869;&#23384;&#27844;&#28431;&#30340;&#37327;&#20943;&#23569;&#20102;&#19968;&#21322;&#24038;&#21491;&#12290;
</p>

<p>
&#25509;&#19979;&#26469;&#36827;&#20837;&#27491;&#39064;&#65292;&#22312;&#25105;&#20204;&#39033;&#30446;&#20351;&#29992;&#30340;&#24320;&#28304;&#24211;&#20013;&#65292;&#23384;&#22312;&#22823;&#37327;&#30340;&#21516;&#19968;&#20010;&#38382;&#39064;&#12290;
</p>

<p>
&#23545;&#20110;&#19979;&#38754;&#36825;&#20010;&#31867;
</p>
<div>

<pre><span>class</span> <span>A</span>
{
<span>public</span>:
    <span>A</span> &amp;<span>create</span>() {<span>A</span> *<span>p</span> = <span>new</span> <span>A</span>; <span>return</span> *p;}
    <span>virtual</span> ~<span>A</span>();
<span>private</span>:
    <span>A</span>();
};
</pre>
</div>
<p>
&#39318;&#20808;&#65292;&#23545;&#20110;&#31867; <b>A</b> &#30340;&#26041;&#27861; <b>create</b> &#65292;&#22914;&#26524;&#25353;&#19979;&#38754;&#30340;&#24418;&#24335;&#35843;&#29992;&#65306;
</p>
<div>

<pre><span>A</span> <span>a</span>;
<span>A</span> <span>b</span> = a.create();
</pre>
</div>
<p>
&#26159;&#24517;&#28982;&#20250;&#21457;&#29983;&#20869;&#23384;&#27844;&#28431;&#30340;&#65292;&#22240;&#20026; b &#19981;&#26159;&#24341;&#29992;&#31867;&#22411;&#65292;&#22312;&#36171;&#20540;&#26102;&#21457;&#29983;&#30340;&#26159;&#25335;&#36125;&#25805;&#20316;&#65292; <b>create()</b> &#20869;&#37096;&#20135;&#29983;&#30340;&#25351;&#38024;&#24050;&#32463;&#34987;&#20002;&#22833;&#20102;&#12290;&#25152;&#24184;&#36825;&#31181;&#34892;&#20026;&#22312;&#39033;&#30446;&#20197;&#21450;&#39033;&#30446;&#20351;&#29992;&#30340;&#24320;&#28304;&#24211;&#20013;&#24182;&#27809;&#26377;&#21457;&#29616;&#12290;&#20294;&#22312;&#35813;&#24320;&#28304;&#24211;&#33258;&#36523;&#30340;&#20195;&#30721;&#20013;&#65292;&#22823;&#37327;&#23384;&#22312;&#21478;&#22806;&#19968;&#31181;&#38169;&#35823;&#12290;
</p>
<div>

<pre><span>A</span> <span>a</span>;
<span>A</span> &amp;<span>b</span> = a.create();
</pre>
</div>
<p>
&#20351;&#29992;&#24341;&#29992;&#23545;&#35937;&#26469;&#25509;&#21463; <b>create()</b> &#36820;&#22238;&#30340;&#23545;&#35937;&#26159;&#27491;&#30830;&#30340;&#65292;&#20294;&#26159;&#65292;&#30001;&#20110;&#23545;&#35937;&#25152;&#20351;&#29992;&#30340;&#20869;&#23384;&#31354;&#38388;&#26159;&#36890;&#36807; <b>new</b> &#24471;&#21040;&#30340;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#20854;&#21344;&#29992;&#30340;&#20869;&#23384;&#65292;&#26159;&#22312;&#22534;&#19978;&#30340;&#65292;&#23545;&#20110;&#36825;&#26679;&#30340;&#20869;&#23384;&#31354;&#38388;&#65292;&#22914;&#26524;&#19981;&#25163;&#21160;&#36827;&#34892;&#22238;&#25910;&#65292;&#21017;&#22312;&#31243;&#24207;&#36864;&#20986;&#26102;&#20063;&#19981;&#20250;&#34987;&#22238;&#25910;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#19979;&#38754;&#30340;&#25805;&#20316;&#25165;&#26159;&#27491;&#30830;&#30340;&#65306;
</p>
<div>

<pre><span>A</span> <span>a</span>;
<span>A</span> &amp;<span>b</span> = a.create();
<span>// </span><span>...</span>
<span>delete</span> &amp;b;
</pre>
</div>
<p>
&#28982;&#32780;&#24456;&#19981;&#24184;&#30340;&#26159;&#65292;&#36825;&#20010;&#24320;&#28304;&#24211;&#37324;&#38754;&#23545;&#20110;&#22823;&#37327;&#35843;&#29992; <b>create()</b> &#21450;&#31867;&#20284;&#26041;&#27861;&#36820;&#22238;&#30340;&#23545;&#35937;&#65292;&#37117;&#27809;&#26377;&#36827;&#34892;&#22238;&#25910;&#65292;&#36825;&#26159;&#23427;&#33258;&#36523;&#30340;&#38382;&#39064;&#12290;&#22914;&#26524;&#35201;&#24443;&#24213;&#35299;&#20915;&#30446;&#21069;&#25105;&#38754;&#20020;&#30340;&#20869;&#23384;&#27844;&#28431;&#38382;&#39064;&#65292;&#21482;&#33021;&#21435;&#20462;&#25913;&#36825;&#20010;&#24320;&#28304;&#24211;&#20102;&#65292;&#24819;&#24819;&#23601;&#35273;&#24471;&#26159;&#19968;&#20214;&#24456;&#40635;&#28902;&#30340;&#20107;&#24773;_(:3&#12301;&ang;)_
</p>