<div>
<h2>&#30446;&#24405;</h2>
<div>
<ul>
<li><a href="http://www.zmonster.me#org242584d" rel="noopener noreferrer" target="_blank">&#25163;&#24037;&#35299;&#26512;</a></li>
<li><a href="http://www.zmonster.me#org039a802" rel="noopener noreferrer" target="_blank">getopts</a></li>
<li><a href="http://www.zmonster.me#org29fcbdf" rel="noopener noreferrer" target="_blank">getopt</a></li>
<li><a href="http://www.zmonster.me#orgefa2c7a" rel="noopener noreferrer" target="_blank">getopts&#22788;&#29702;&#38271;&#36873;&#39033;</a></li>
<li><a href="http://www.zmonster.me#org893ba73" rel="noopener noreferrer" target="_blank">&#22312;&#20989;&#25968;&#20013;&#35299;&#26512;&#21442;&#25968;</a></li>
</ul>
</div>
</div>

<p>
&#22312;Shell&#33050;&#26412;&#20013;&#22788;&#29702;&#21629;&#20196;&#34892;&#21442;&#25968;&#65292;&#21487;&#20197;&#20351;&#29992;getopts/getopt&#26469;&#36827;&#34892;&mdash;&mdash;&#24403;&#28982;&#65292;&#25163;&#24037;&#35299;&#26512;&#20063;&#26159;&#21487;&#20197;&#30340;&#12290;
</p>

<p>
&#19979;&#38754;&#36890;&#36807;&#19968;&#20010;&#29305;&#23450;&#30340;&#24773;&#26223;&#26469;&#35762;&#19968;&#19979;&#36825;&#19977;&#31181;&#21442;&#25968;&#22788;&#29702;&#26041;&#27861;&#12290;
</p>

<p>
&#36825;&#20004;&#22825;&#20889;&#20102;&#19968;&#20010;&#23433;&#20840;&#21024;&#38500;&#30340;&#33050;&#26412;&#65292;&#21407;&#29702;&#23601;&#26159;&#23558;&#25351;&#23450;&#30340;&#25991;&#20214;&#31227;&#21160;&#21040;&#26576;&#20010;&#29305;&#23450;&#30340;&#30446;&#24405;&#19979;&#24182;&#20445;&#23384;&#20854;&#21407;&#22987;&#36335;&#24452;&#20449;&#24687;&#65292;&#36825;&#21644;&#22312;Windows&#19979;&#20197;&#21450;&#22312;Linux&#30340;&#26700;&#38754;&#29615;&#22659;&#19979;"&#23558;&#25991;&#20214;&#31227;&#21160;&#21040;&#22238;&#25910;&#31449;"&#30340;&#24847;&#20041;&#26159;&#19968;&#26679;&#30340;&#12290;&#23601;&#25343;&#36825;&#20010;&#26469;&#20570;&#20363;&#23376;&#21543;&#12290;
</p>

<p>
&#22312;&#36825;&#20010;&#33050;&#26412;&#20013;&#65292;&#26377;&#20116;&#20010;&#36873;&#39033;&#65292;&#20998;&#21035;&#20195;&#34920;&#20116;&#31181;&#21160;&#20316;:
</p>
<ol>
<li>-d : &#23558;&#25991;&#20214;&#31227;&#21160;&#21040;&#22238;&#25910;&#31449;&#65292;&#35813;&#36873;&#39033;&#21518;&#38656;&#35201;&#25351;&#23450;&#19968;&#20010;&#25991;&#20214;&#25110;&#30446;&#24405;&#21517;</li>
<li>-l : &#21015;&#20986;&#34987;&#31227;&#21160;&#21040;&#22238;&#25910;&#31449;&#30340;&#25991;&#20214;&#21450;&#20854;id&#65292;&#35813;&#36873;&#39033;&#19981;&#38656;&#35201;&#20540;</li>
<li>-b : &#24674;&#22797;&#34987;&#31227;&#21160;&#21040;&#22238;&#25910;&#31449;&#30340;&#25991;&#20214;&#65292;&#35813;&#36873;&#39033;&#38656;&#35201;&#25351;&#23450;&#19968;&#20010;&#25991;&#20214;&#23545;&#24212;&#30340;id</li>
<li>-c : &#28165;&#31354;&#22238;&#25910;&#31449;&#65292;&#35813;&#36873;&#39033;&#19981;&#38656;&#35201;&#20540;</li>
<li>-h : &#25171;&#21360;&#24110;&#21161;&#20449;&#24687;</li>
</ol>

<div>
<h2>&#25163;&#24037;&#35299;&#26512;</h2>
<div>
<p>
&#25152;&#35859;&#30340;&#25163;&#24037;&#35299;&#26512;&#65292;&#23601;&#26159;&#21462;&#21040;&#21442;&#25968;&#21518;&#25163;&#24037;&#19968;&#20010;&#19968;&#20010;&#35299;&#26512;&#20102;&#65292;&#20197;&#19979;&#26159;&#25163;&#24037;&#35299;&#26512;&#19978;&#36848;&#24773;&#26223;&#21442;&#25968;&#30340;&#36807;&#31243;:
</p>
<div>
<pre><span>while</span> [ $<span>#</span> -gt 0 ];<span>do</span>
    <span>case</span> $<span>1</span><span> in</span>
        -d)
            <span>shift</span>
            <span>file_to_trash</span>=$<span>1</span>
            trash $<span>file_to_trash</span> <span># </span><span>trash is a function</span>
            ;;
        -l)
            print_trashed_file  <span># </span><span>print_trashed_file is a function</span>
            ;;
        -b)
            <span>shift</span>
            <span>file_to_untrash</span>=$<span>1</span>
            untrash $<span>file_to_untrash</span> <span># </span><span>untrash is a function</span>
            ;;
        -c)
            clean_all           <span># </span><span>clean all is a function</span>
            ;;
        -h)
            usage
            <span>exit</span> 0
            ;;
        <span>\?</span>)
            usage
            <span>exit</span> 1
            ;;
    <span>esac</span>
<span>done</span>
</pre>
</div>

<p>
&#36825;&#37324;&#29992;&#21040;&#20102;'shift'&#36825;&#20010;&#21629;&#20196;&#65292;&#36825;&#20010;&#21629;&#20196;&#30340;&#20316;&#29992;&#26159;&#23558;&#21442;&#25968;&#21015;&#34920;&#20197;&#31354;&#26684;&#20026;&#20998;&#38548;&#31526;&#24038;&#31227;&#19968;&#20010;&#21333;&#20301;&#65292;&#25110;&#32773;&#21487;&#20197;&#29702;&#35299;&#20026;&#23558;&#31532;&#19968;&#20010;&#21442;&#25968;&#32473;&#21435;&#25481;&#20102;&#65292;&#27604;&#22914;&#33719;&#21462;&#30340;&#21629;&#20196;&#34892;&#21442;&#25968;&#20026;:
</p>
<pre>
-d hello.txt
</pre>
<p>
&#22312;&#25191;&#34892;&#20102;'shift'&#21518;&#65292;&#21629;&#20196;&#34892;&#21442;&#25968;&#23601;&#21464;&#25104;&#20102;
</p>
<pre>
hello.txt
</pre>

<p>
&#36825;&#26679;&#65292;&#22312;&#20351;&#29992;&#20102;shift&#21518;&#65292;&#25105;&#20204;&#27599;&#27425;&#37117;&#21482;&#35201;&#21435;&#30475;&#21442;&#25968;&#21015;&#34920;&#20013;&#30340;&#31532;&#19968;&#20010;&#23601;&#34892;&#20102;&#12290;&#24403;&#28982;&#65292;&#20854;&#23454;&#19981;&#29992;'shift'&#20063;&#26159;&#21487;&#20197;&#30340;&#65292;&#27604;&#22914;&#35828;&#36825;&#26679;:
</p>
<div>
<pre><span>i</span>=1
<span>while</span> [ $<span>i</span> -le $<span>#</span> ];<span>do</span>
    <span>case</span> ${<span>!</span>i} <span>in</span>
        -d)
            <span>i</span>=$(<span>expr</span> $<span>i</span> + 1)
            <span>file_to_trash</span>=${<span>!</span>i}
            trash $<span>file_to_trash</span> <span># </span><span>trash is a function</span>
            ;;
        -l)
            print_trashed_file  <span># </span><span>print_trashed_file is a function</span>
            ;;
        -b)
            <span>i</span>=$(<span>expr</span> $<span>i</span> + 1)
            <span>file_to_untrash</span>=${<span>!</span>i}
            untrash $<span>file_to_untrash</span> <span># </span><span>untrash is a function</span>
            ;;
        -c)
            clean_all           <span># </span><span>clean all is a function</span>
            ;;
        -h)
            usage
            <span>exit</span> 0
            ;;
        <span>\?</span>)
            usage
            <span>exit</span> 1
            ;;
    <span>esac</span>
    <span>i</span>=$(<span>expr</span> $<span>i</span> + 1)
<span>done</span>
</pre>
</div>

<p>
&#23545;&#27604;&#21487;&#20197;&#21457;&#29616;&#20351;&#29992;'shift'&#20250;&#31245;&#24494;&#26041;&#20415;&#19968;&#28857;&#12290;
</p>

<p>
&#24403;&#28982;&#65292;&#19978;&#38754;&#30340;&#22788;&#29702;&#27809;&#26377;&#36827;&#34892;&#21442;&#25968;&#26816;&#26597;&#65292;&#36825;&#20123;&#26816;&#26597;&#24212;&#35813;&#35201;&#38450;&#27490;&#36825;&#20123;&#38169;&#35823;&#24773;&#20917;:&#21442;&#25968;&#20010;&#25968;&#20026;0&#12289;&#23436;&#20840;&#20914;&#31361;&#30340;"&#21160;&#20316;"&#19968;&#36215;&#20986;&#29616;&#12289;&#36873;&#39033;&#38656;&#35201;&#20540;&#20294;&#26410;&#32473;&#20540;&#12290;
</p>
</div>
</div>

<div>
<h2>getopts</h2>
<div>
<p>
'getopts'&#26159;POSIX Shell&#20013;&#20869;&#32622;&#30340;&#19968;&#20010;&#21629;&#20196;&#65292;&#20854;&#20351;&#29992;&#26041;&#27861;&#26159;:
</p>
<div>
<pre><span>getopts</span> &lt;opt_string&gt; &lt;optvar&gt; &lt;arguments&gt;
</pre>
</div>

<p>
&#19979;&#38754;&#26159;&#22312;Shell&#20013;&#20351;&#29992;&#35813;&#21629;&#20196;&#30340;&#19968;&#20010;&#31034;&#20363;:
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/getopts.gif" alt="getopts.gif" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
&#26412;&#36136;&#19978;&#26469;&#35828;&#65292;'getopts'&#30340;&#22788;&#29702;&#21644;&#25105;&#20204;&#25163;&#24037;&#22788;&#29702;&#26159;&#24046;&#19981;&#22810;&#30340;&#65292;&#23427;&#19981;&#36807;&#26159;&#25552;&#20379;&#20102;&#26356;&#20415;&#21033;&#30340;&#26041;&#24335;&#32780;&#24050;&#12290;&#23427;&#30340;&#20351;&#29992;&#26041;&#24335;&#38750;&#24120;&#31616;&#21333;&#26126;&#20102;&#65292;&#20854;&#24418;&#24335;&#20026;:
</p>
<div>
<pre><span>while </span><span>getopts</span> &lt;opt_string&gt; &lt;optvar&gt;
    <span>case</span> $&lt;optvar&gt;<span> in</span>
        <span># </span><span>...</span>
    <span>esac</span>
<span>done</span>
</pre>
</div>
<p>
&#20854;&#20013;&lt;opt_string&gt;&#26159;&#35201;&#22788;&#29702;&#30340;&#36873;&#39033;&#30340;&#19968;&#20010;&#38598;&#21512;&#65292;&#27599;&#20010;&#36873;&#39033;&#22312;&#20854;&#20013;&#29992;&#19981;&#21253;&#21547;&#36830;&#23383;&#31526;'-'&#30340;&#23383;&#27597;&#26469;&#34920;&#31034;&#65292;&#27599;&#20010;&#20195;&#34920;&#36873;&#39033;&#30340;&#23383;&#27597;&#21069;&#21518;&#21487;&#20197;&#26377;&#19968;&#20010;&#20882;&#21495;&#65292;&#21069;&#38754;&#26377;&#20882;&#21495;&#34920;&#31034;&#24403;&#22788;&#29702;&#35813;&#36873;&#39033;&#20986;&#38169;&#26102;&#19981;&#36755;&#20986;'getopts'&#33258;&#36523;&#20135;&#29983;&#30340;&#38169;&#35823;&#20449;&#24687;&#65292;&#36825;&#26041;&#20415;&#25105;&#20204;&#33258;&#24049;&#32534;&#20889;&#23545;&#24212;&#30340;&#38169;&#35823;&#22788;&#29702;&#26041;&#27861;;&#21518;&#38754;&#30340;&#20882;&#21495;&#34920;&#31034;&#36825;&#20010;&#36873;&#39033;&#38656;&#35201;&#19968;&#20010;&#20540;&#12290;&#23545;&#20110;&#25105;&#20204;&#36825;&#20010;"&#23433;&#20840;&#21024;&#38500;"&#30340;&#20363;&#23376;&#65292;&#36825;&#20010;&lt;opt_string&gt;&#24212;&#35813;&#26159;:
</p>
<div>
<pre>d:lb:ch
</pre>
</div>
<p>
&#20882;&#21495;&#30340;&#24402;&#23646;&#30340;&#35805;&#65292;&#20808;&#21040;&#20808;&#24471;&#21543;&#65292;&#22823;&#27010;&#26159;&#36825;&#26679;&#12290;
</p>

<p>
&#22312;&#20351;&#29992;'getopts'&#26102;&#65292;&#26377;&#20004;&#20010;&#29305;&#27530;&#30340;&#21464;&#37327;&#65292;&#23427;&#20204;&#26159; <b>OPTIND</b> &#21644; <b>OPTARG</b> &#65292;&#21069;&#32773;&#34920;&#31034;&#24403;&#21069;&#21442;&#25968;&#22312;&#21442;&#25968;&#21015;&#34920;&#20013;&#30340;&#20301;&#32622;&mdash;&mdash;&#30456;&#24403;&#20110;&#25163;&#24037;&#35299;&#26512;&#31532;&#20108;&#31181;&#26041;&#27861;&#20013;&#37027;&#20010;&#33258;&#23450;&#20041;&#30340;&#21464;&#37327; <b>i</b> &#65292;&#20854;&#20540;&#21021;&#22987;&#26102;&#20026;1&#65292; &#20250;&#22312;&#27599;&#27425;&#21462;&#20102;&#36873;&#39033;&#20197;&#21450;&#20854;&#20540;(&#22914;&#26524;&#26377;&#30340;&#35805;)&#21518;&#26356;&#26032;; <b>OPTARG</b> &#21017;&#26159;&#22312;&#36873;&#39033;&#38656;&#35201;&#20540;&#26102;&#65292;&#23384;&#20648;&#36825;&#20010;&#36873;&#39033;&#23545;&#24212;&#30340;&#20540;&#12290;&#36825;&#26679;&#65292;&#25105;&#20204;&#36825;&#20010;&#20363;&#23376;&#29992;'getopts'&#23601;&#21487;&#20197;&#20889;&#25104;:
</p>
<div>
<pre><span>while </span><span>getopts</span> d:lb:ch OPT;<span>do</span>
    <span>case</span> $<span>OPT</span><span> in</span>
        d)
            <span>file_to_trash</span>=$<span>OPTARG</span>
            trash $<span>file_to_trash</span> <span># </span><span>trash is a function</span>
            ;;
        l)
            print_trashed_file  <span># </span><span>print_trashed_file is a function</span>
            ;;
        b)
            <span>file_to_untrash</span>=$<span>OPTARG</span>
            untrash $<span>file_to_untrash</span> <span># </span><span>untrash is a function</span>
            ;;
        c)
            clean_all           <span># </span><span>clean all is a function</span>
            ;;
        h)
            usage
            <span>exit</span> 0
            ;;
        <span>\?</span>)
            usage
            <span>exit</span> 1
            ;;
    <span>esac</span>
<span>done</span>
</pre>
</div>

<p>
&#23545;&#27604;&#21487;&#20197;&#30475;&#21040;&#65292;&#30456;&#27604;&#25163;&#24037;&#35299;&#26512;&#30340;&#31532;&#19968;&#31181;&#21150;&#27861;&#65292;&#21448;&#26356;&#20026;&#31616;&#27905;&#19968;&#28857;&#20102;&#12290;&#19981;&#36807;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;'getopts'&#20250;&#20174;&#31532;&#19968;&#20010;&#21442;&#25968;&#24320;&#22987;&#65292;&#21482;&#25353;&#29031;&lt;opt_string&gt;&#25351;&#23450;&#30340;&#24418;&#24335;&#26469;&#23547;&#25214;&#24182;&#35299;&#26512;&#21442;&#25968;&#65292;&#22914;&#26524;&#32473;&#20986;&#30340;&#23454;&#38469;&#21629;&#20196;&#34892;&#21442;&#25968;&#19982;&#20854;&#25152;&#25551;&#36848;&#30340;&#21442;&#25968;&#24418;&#24335;&#19981;&#31526;&#65292;&#21017;&#20250;&#20986;&#38169;&#20013;&#27490;&#12290;
</p>

<p>
&#27604;&#22914;&#35828;&#65292;&#23545;&#20110;&#19978;&#38754;&#30340;&#20363;&#23376;&#65292;&#20551;&#35774;&#36825;&#20010;&#33050;&#26412;&#24050;&#32463;&#23436;&#20840;&#20889;&#22909;&#20102;&#65292;&#33050;&#26412;&#21517;&#20026; <b>trash.sh</b> &#65292;&#20854;&#21442;&#25968;&#22788;&#29702;&#23601;&#26159;&#19978;&#38754;&#36825;&#26679;&#65292;&#37027;&#20040;&#22914;&#26524;&#25105;&#22312;&#32456;&#31471;&#37324;&#25191;&#34892;:
</p>
<div>
<pre>./trash.sh a -b hello.txt
</pre>
</div>
<p>
&#24320;&#22987;&#37027;&#20010;&#22810;&#20313;&#30340;&#21442;&#25968;'a'&#23558;&#20250;&#23548;&#33268;'getopts'&#22312;&#35299;&#26512;&#21040;&#36873;&#39033;'-b'&#21069;&#23601;&#20986;&#38169;&#32456;&#27490;&#12290;&#25152;&#20197;&#21602;&#65292;&#20687;&#20351;&#29992;'getopts'&#36825;&#26679;&#30340;&#26041;&#27861;&#65292;&#20854;&#33258;&#30001;&#24230;&#19981;&#22914;&#25163;&#24037;&#35299;&#26512;&#65292;&#22914;&#26524;&#35201;&#20445;&#35777;&#33050;&#26412;&#22312;&#20219;&#20309;&#24773;&#20917;&#19979;&#37117;&#33021;&#27491;&#30830;&#35299;&#26512;&#21442;&#25968;&#65292;&#23427;&#38656;&#35201;&#22810;&#20570;&#19968;&#28857;&mdash;&mdash;&#24403;&#28982;&#21862;&#65292;&#19978;&#38754;&#36825;&#20010;&#24858;&#34850;&#30340;&#38169;&#35823;&#20351;&#29992;&#24773;&#20917;&#36824;&#26159;&#27604;&#36739;&#23569;&#20986;&#29616;&#30340;&#21862;&#65292;&#21453;&#27491;&#25105;&#29616;&#22312;&#20889;&#30340;&#33050;&#26412;&#37324;&#21387;&#26681;&#27809;&#32771;&#34385;&#36825;&#26679;&#30340;&#24773;&#20917;&#12290;
</p>
</div>
</div>

<div>
<h2>getopt</h2>
<div>
<p>
'getopt'&#19982;'getopts'&#31867;&#20284;&#65292;&#19981;&#36807;'getopts'&#21482;&#33021;&#22788;&#29702;&#30701;&#36873;&#39033;&#65292;'getopt'&#21017;&#33021;&#22788;&#29702;&#30701;&#36873;&#39033;&#21644;&#38271;&#36873;&#39033;&#12290;&#25152;&#35859;&#30340;&#30701;&#36873;&#39033;&#23601;&#26159;&#31867;&#20284;&#19979;&#38754;&#36825;&#26679;&#30340;&#36873;&#39033;:
</p>
<pre>
-a
</pre>

<p>
&#32780;&#19979;&#38754;&#36825;&#26679;&#30340;&#21017;&#26159;&#38271;&#36873;&#39033;
</p>
<pre>
--action=delete
</pre>

<p>
&#24403;&#28982;&#65292;&#20107;&#26080;&#32477;&#23545;&#65292;&#36890;&#36807;&#19968;&#20123;&#25216;&#24039;&#65292;&#29992;'getopts'&#22788;&#29702;&#38271;&#36873;&#39033;&#20063;&#26159;&#21487;&#33021;&#30340;&#12290;&#36825;&#37324;&#20808;&#35828;&#19968;&#19979;&#22914;&#20309;&#29992;'getopt'&#26469;&#22788;&#29702;&#21442;&#25968;&#21543;&#12290;
</p>

<p>
&#38656;&#35201;&#20107;&#20808;&#35828;&#26126;&#30340;&#19968;&#28857;&#26159;&#65292;'getopt'&#19981;&#26159;Shell&#20869;&#24314;&#30340;&#21629;&#20196;&#65292;&#32780;&#26159;'util-linux'&#36825;&#20010;&#36719;&#20214;&#21253;&#25552;&#20379;&#30340;&#21151;&#33021;&#65292;&#23427;&#19981;&#26159;POSIX&#26631;&#20934;&#30340;&#19968;&#37096;&#20998;&#65292;&#25152;&#20197;&#20063;&#26377;&#20154;<a href="http://mywiki.wooledge.org/BashFAQ/035#getopts" rel="noopener noreferrer" target="_blank">&#24314;&#35758;&#19981;&#20351;&#29992;'getopt'</a>&#12290;
</p>

<p>
&#39318;&#20808;&#23558;&#20043;&#21069;&#35828;&#21040;&#30340;&#20116;&#31181;&#21160;&#20316;&#23545;&#24212;&#30340;&#30701;&#36873;&#39033;&#25193;&#23637;&#19968;&#19979;&#65292;&#20197;&#20415;&#35762;&#35299;'getopt'&#30340;&#20351;&#29992;:
</p>
<ol>
<li>-d/&ndash;delete : &#23558;&#25991;&#20214;&#31227;&#21160;&#21040;&#22238;&#25910;&#31449;&#65292;&#35813;&#36873;&#39033;&#21518;&#38656;&#35201;&#25351;&#23450;&#19968;&#20010;&#25991;&#20214;&#25110;&#30446;&#24405;&#21517;</li>
<li>-l/&ndash;list : &#21015;&#20986;&#34987;&#31227;&#21160;&#21040;&#22238;&#25910;&#31449;&#30340;&#25991;&#20214;&#21450;&#20854;id&#65292;&#35813;&#36873;&#39033;&#19981;&#38656;&#35201;&#20540;</li>
<li>-b/&ndash;back : &#24674;&#22797;&#34987;&#31227;&#21160;&#21040;&#22238;&#25910;&#31449;&#30340;&#25991;&#20214;&#65292;&#35813;&#36873;&#39033;&#38656;&#35201;&#25351;&#23450;&#19968;&#20010;&#25991;&#20214;&#23545;&#24212;&#30340;id</li>
<li>-c/&ndash;clear : &#28165;&#31354;&#22238;&#25910;&#31449;&#65292;&#35813;&#36873;&#39033;&#19981;&#38656;&#35201;&#20540;</li>
<li>-h/&ndash;help : &#25171;&#21360;&#24110;&#21161;&#20449;&#24687;</li>
</ol>


<p>
'getopt'&#26082;&#33021;&#22788;&#29702;&#30701;&#36873;&#39033;&#20063;&#33021;&#22788;&#29702;&#38271;&#36873;&#39033;&#65292;&#30701;&#36873;&#39033;&#36890;&#36807;&#21442;&#25968; <b>-o</b> &#25351;&#23450;&#65292;&#38271;&#36873;&#39033;&#36890;&#36807;&#21442;&#25968; <b>-l</b> &#25351;&#23450;&#12290;&#21516;'getopts'&#19968;&#26679;&#65292;&#23427;&#19968;&#27425;&#20063;&#21482;&#35299;&#26512;&#19968;&#20010;&#36873;&#39033;&#65292;&#25152;&#20197;&#20063;&#38656;&#35201;&#24490;&#29615;&#22788;&#29702;&#65292;&#19981;&#36807;&#19982;'getopts'&#19981;&#21516;&#30340;&#26159;&#65292;'getopt'&#27809;&#26377;&#20351;&#29992; <b>OPTIND</b> &#21644; <b>OPTARG</b> &#36825;&#20004;&#20010;&#21464;&#37327;&#65292;&#25152;&#20197;&#25105;&#20204;&#36824;&#24471;&#25163;&#21160;&#23545;&#21442;&#25968;&#36827;&#34892;'shift'&#65292;&#23545;&#38656;&#35201;&#20540;&#30340;&#36873;&#39033;&#65292;&#20063;&#24471;&#25163;&#21160;&#21435;&#21462;&#20986;&#20540;&#12290;
</p>

<p>
&#19979;&#38754;&#26159;&#22312;Shell&#20013;&#20351;&#29992;'getopt'&#30340;&#19968;&#20010;&#31034;&#20363;:
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/getopt.gif" alt="getopt.gif" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
&#21487;&#20197;&#30475;&#21040;&#65292;'getopt'&#23558;&#21442;&#25968;&#20013;&#20197;&#19979;&#24418;&#24335;&#30340;&#20869;&#23481;:
</p>
<pre>
--longopt=argument
</pre>
<p>
&#22312;&#36820;&#22238;&#32467;&#26524;&#20013;&#26367;&#25442;&#25104;&#19979;&#38754;&#36825;&#26679;&#30340;&#24418;&#24335;:
</p>
<pre>
--longopt argument
</pre>
<p>
&#36825;&#26679;&#23601;&#21487;&#20197;&#36890;&#36807;&#24490;&#29615;&#21644;'shift'&#26469;&#36827;&#34892;&#22788;&#29702;&#20102;&#65292;&#19981;&#36807;&#22312;&#33050;&#26412;&#20013;&#65292;'shift'&#21629;&#20196;&#26159;&#23545;&#21629;&#20196;&#34892;&#21442;&#25968;&#36215;&#20316;&#29992;&#30340;&#65292;&#21363;&#29305;&#27530;&#21464;&#37327;"$@"&#65292;&#32780;&#25105;&#20204;&#22312;&#33050;&#26412;&#20013;&#21482;&#33021;&#23558;'getopt'&#30340;&#36820;&#22238;&#32467;&#26524;&#20316;&#20026;&#23383;&#31526;&#20018;&#23384;&#20648;&#21040;&#19968;&#20010;&#21464;&#37327;&#20013;&#12290;&#20026;&#20102;&#35753;'shift'&#36215;&#20316;&#29992;&#65292;&#36890;&#24120;&#36824;&#35201;&#20351;&#29992;'set'&#21629;&#20196;&#26469;&#23558;&#21464;&#37327;&#30340;&#20540;&#36171;&#32473;"$@"&#36825;&#20010;&#29305;&#27530;&#21464;&#37327;&#12290;
</p>

<p>
&#30495;&#26159;&#26377;&#22815;&#40635;&#28902;&#30340;&hellip;&hellip;&#31639;&#20102;&#65292;&#19979;&#38754;&#20877;&#38598;&#20013;&#21520;&#27133;&#21543;&hellip;&hellip;
</p>

<p>
&#28982;&#21518;&#65292;&#22312;&#35774;&#32622;&#22909;&#30701;&#36873;&#39033;&#21644;&#38271;&#36873;&#39033;&#21518;&#65292;&#22312;&#23558;&#23454;&#38469;&#30340;&#21442;&#25968;&#20256;&#32473;'getopt'&#26102;&#65292;&#35201;&#22312;&#23454;&#38469;&#21442;&#25968;&#21069;&#21152;&#19978;&#19968;&#20010;&#20004;&#20010;&#36830;&#23383;&#31526; <b>--</b> &#65292;&#32780;'getopt'&#20250;&#23558;&#36825;&#20004;&#20010;&#36830;&#23383;&#31526;&#25918;&#21040;&#36820;&#22238;&#32467;&#26524;&#30340;&#26368;&#21518;&#38754;&#65292;&#22312;&#22788;&#29702;&#26102;&#21487;&#20197;&#23558;&#36825;&#20004;&#20010;&#36830;&#23383;&#31526;&#35270;&#20026;&#32467;&#26463;&#26631;&#24535;&#12290;
</p>

<p>
&#20197;&#19979;&#26159;&#38024;&#23545;&#26412;&#25991;&#20551;&#35774;&#30340;&#24773;&#26223;&#65292;&#20351;&#29992;'getopt'&#35299;&#26512;&#21442;&#25968;&#30340;&#27969;&#31243;:
</p>
<div>
<pre><span>arg</span>=$(<span>getopt</span> -o d:lb:ch -l delete:,list,back:,clear,help -- $<span>@</span>)

<span>set</span> -- <span>"$arg"</span>

<span>while</span> true
<span>do</span>
    <span>case</span> $<span>1</span><span> in</span>
        -d|--delete)
            <span>file_to_trash</span>=$<span>2</span>
            trash $<span>file_to_trash</span> <span># </span><span>trash is a function</span>
            <span>shift</span> 2
            ;;
        -l|--list)
            print_trashed_file  <span># </span><span>print_trashed_file is a function</span>
            <span>shift</span>
            ;;
        -b|--back)
            <span>file_to_untrash</span>=$<span>2</span>
            untrash $<span>file_to_untrash</span> <span># </span><span>untrash is a function</span>
            <span>shift</span>
            ;;
        -c|--clear)
            clean_all           <span># </span><span>clean all is a function</span>
            <span>shift</span>
            ;;
        -h|--help)
            usage
            <span>exit</span> 0
            ;;
        --)
            <span>shift</span>
            <span>break</span>
            ;;
    <span>esac</span>
<span>done</span>
</pre>
</div>

<p>
&#28982;&#32780;&#65292;&#30693;&#36947;&#20102;'getopt'&#30340;&#20351;&#29992;&#21450;&#20854;&#21407;&#29702;&#21518;&#65292;&#33258;&#28982;&#32780;&#28982;&#22320;&#21487;&#20197;&#21457;&#29616;&#65292;&#25105;&#21487;&#20197;&#19981;&#29992;&#21435;&#31649;&#36825;&#20010;&#32467;&#26463;&#26631;&#24535;&#65292;&#29992;"$#"&#36825;&#20010;&#34920;&#31034;&#21442;&#25968;&#20010;&#25968;&#30340;&#29305;&#27530;&#21464;&#37327;&#65292;&#21516;&#26679;&#21487;&#20197;&#25511;&#21046;&#21442;&#25968;&#35299;&#26512;&#30340;&#27969;&#31243;&#65292;&#36825;&#23436;&#20840;&#21644;&#25163;&#24037;&#35299;&#26512;&#26159;&#21516;&#19968;&#20010;&#36947;&#29702;&#12290;&#25105;&#29978;&#33267;&#21487;&#20197;&#23558;'getopt'&#30340;&#36820;&#22238;&#32467;&#26524;&#23384;&#20648;&#21040;&#19968;&#20010;&#25968;&#32452;&#37324;&#65292;&#30452;&#25509;&#24490;&#29615;&#22788;&#29702;&#36825;&#20010;&#25968;&#32452;&#65292;&#32780;&#19981;&#29992;&#20351;&#29992;'set'&#21629;&#20196;&#20102;&#12290;
</p>

<p>
&#22909;&#20102;&#65292;&#21520;&#27133;&#26102;&#38388;&#12290;
</p>

<p>
&#25105;&#20043;&#21069;&#20889;&#33050;&#26412;&#37117;&#26159;&#29992;&#30340;'getopts'&#65292;&#19968;&#26469;&#25105;&#29992;&#19981;&#19978;&#38271;&#36873;&#39033;&#65292;&#20108;&#26469;'getopts'&#30340;&#20351;&#29992;&#36275;&#22815;&#31616;&#21333;&#12290;&#22312;&#20889;&#26412;&#25991;&#20043;&#21069;&#65292;&#25105;&#20498;&#26159;&#30693;&#36947;'getopt'&#21487;&#20197;&#22788;&#29702;&#38271;&#36873;&#39033;&#65292;&#20294;&#27809;&#20180;&#32454;&#20102;&#35299;&#36807;&#12290;&#36825;&#20004;&#22825;&#20102;&#35299;&#20102;&#19968;&#19979;&#65292;&#35273;&#24471;&#36824;&#26159;&#21035;&#29992;'getopt'&#30340;&#22909;&#65292;&#29702;&#30001;&#22914;&#19979;:
</p>

<ol>
<li>'getopt'&#19981;&#26159;Shell&#20869;&#24314;&#21629;&#20196;&#65292;&#36328;&#24179;&#21488;&#20351;&#29992;&#26102;&#21487;&#33021;&#20250;&#20986;&#29616;&#38382;&#39064;&#65307;</li>
<li><p>
&#21482;&#26159;&#23558;'&ndash;longopt=val'&#36825;&#26679;&#30340;&#21442;&#25968;&#24418;&#24335;&#26367;&#25442;&#25104;&#20102;'&ndash;longopt val'&#65292;&#20294;&#22240;&#27492;&#22686;&#21152;&#20102;&#35768;&#22810;&#22797;&#26434;&#24615;&#65292;&#27604;&#22914;&#20351;&#29992;&#20102;'set'&#21629;&#20196;&#65292;&#22312;&#20351;&#29992;'set'&#21629;&#20196;&#26102;&#36824;&#35201;&#32771;&#34385;'getopt'&#30340;&#36820;&#22238;&#32467;&#26524;&#20013;&#26377;&#26080;Shell&#21629;&#20196;&#65292;&#26377;&#30340;&#35805;&#24212;&#35813;&#20351;&#29992;'eval'&#21629;&#20196;&#26469;&#28040;&#38500;&#21487;&#33021;&#23548;&#33268;&#30340;&#38169;&#35823;
</p>
<pre>
eval set -- "$arg"
</pre></li>
<li>&#35843;&#29992;&#23436;&#36824;&#35201;&#36827;&#34892;&#19982;&#25163;&#24037;&#35299;&#26512;&#31867;&#20284;&#30340;&#24037;&#20316;&#65292;&#30456;&#27604;&#25163;&#24037;&#35299;&#26512;&#65292;&#24182;&#27809;&#26377;&#22810;&#22823;&#20248;&#21183;&#65307;</li>
<li>&#30495;&#30340;&#38656;&#35201;&#38271;&#36873;&#39033;&#21527;&#65311;&#25105;&#35273;&#24471;&#30701;&#36873;&#39033;&#23601;&#36275;&#22815;&#20102;</li>
</ol>
</div>
</div>

<div>
<h2>getopts&#22788;&#29702;&#38271;&#36873;&#39033;</h2>
<div>
<p>
&#26082;&#28982;&#19981;&#24314;&#35758;&#20351;&#29992;'getopt'&#65292;&#37027;&#20040;&#24590;&#20040;&#22788;&#29702;&#38271;&#36873;&#39033;&#21602;&#65311;&#33258;&#28982;&#26159;&#26377;&#21150;&#27861;&#30340;&#12290;
</p>

<p>
&#20026;&#20102;&#26041;&#20415;&#35762;&#35299;&#65292;&#36825;&#37324;&#20551;&#35774;&#19968;&#20010;&#31616;&#21333;&#30340;&#24773;&#26223;&#21543;&#65292;&#22312;&#36825;&#20010;&#24773;&#26223;&#37324;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#22788;&#29702;&#20004;&#20010;&#21487;&#33021;&#30340;&#36873;&#39033;
</p>
<ol>
<li>-f/&ndash;file: &#35774;&#32622;&#25991;&#20214;&#21517;&#65292;&#35813;&#36873;&#39033;&#38656;&#35201;&#20540;</li>
<li>-h/&ndash;help: &#25171;&#21360;&#24110;&#21161;&#20449;&#24687;&#65292;&#35813;&#36873;&#39033;&#19981;&#38656;&#35201;&#20540;</li>
</ol>


<p>
&#29992;'getopts'&#22788;&#29702;&#36825;&#31181;&#24773;&#20917;&#65292;&#21487;&#20197;&#36825;&#20040;&#20570;:
</p>
<div>
<pre><span>filename</span>=<span>""</span>
<span>while </span><span>getopts</span> f:h-: opt;<span>do</span>
    <span>case</span> $<span>opt</span><span> in</span>
        -)
            <span>case</span> $<span>OPTARG</span><span> in</span>
                <span>help</span>)
                    usage
                    <span>exit</span> 0
                    ;;
                <span>file</span>=*)
                    <span>filename</span>=${<span>OPTARG</span>#*=}
                    ;;
            <span>esac</span>
            ;;
        f)
            <span>filename</span>=$<span>OPTARG</span>
            ;;
        h)
            usage
            <span>exit</span> 0
            ;;
        <span>\?</span>)
            usage
            <span>exit</span> 1
            ;;
    <span>esac</span>
<span>done</span>
</pre>
</div>

<p>
&#24403;&#28982;&#65292;&#20063;&#35768;&#24182;&#19981;&#27604;&#25163;&#24037;&#35299;&#26512;&#31616;&#27905;&#22810;&#23569;&#65292;&#20294;&#29992;&#36215;&#26469;&#32943;&#23450;&#26159;&#27604;'getopt'&#35201;&#33298;&#26381;&#30340;&#12290;
</p>
</div>
</div>

<div>
<h2>&#22312;&#20989;&#25968;&#20013;&#35299;&#26512;&#21442;&#25968;</h2>
<div>
<p>
&#26377;&#26102;&#20505;&#65292;&#25105;&#20204;&#20063;&#35768;&#24819;&#25226;&#21442;&#25968;&#35299;&#26512;&#30340;&#24037;&#20316;&#25918;&#21040;&#20989;&#25968;&#20013;&#21435;&#20570;&#65292;&#27604;&#22914;&#35828;&#23450;&#20041;&#20102;&#19968;&#20010;'main'&#20989;&#25968;&#28982;&#21518;&#22312;'main'&#20989;&#25968;&#20013;&#23553;&#35013;&#25972;&#20010;&#27969;&#31243;&#22788;&#29702;&#36923;&#36753;&#12290;&#21448;&#25110;&#32773;&#20687;&#25105;&#19968;&#26679;&#65292;&#20889;&#20102;&#20960;&#20010;&#23567;&#23567;&#30340;&#24037;&#20855;&#20989;&#25968;&#65292;&#25918;&#21040;&#20102;Bash&#30340;&#37197;&#32622;&#25991;&#20214; <b>.bashrc</b> &#20013;&#65292;&#21442;&#25968;&#35299;&#26512;&#30340;&#24037;&#20316;&#24517;&#39035;&#24471;&#22312;&#20989;&#25968;&#20013;&#20570;&#12290;
</p>

<p>
&#25163;&#24037;&#35299;&#26512;&#26159;&#33021;&#24819;&#21040;&#30340;&#26368;&#30452;&#25509;&#30340;&#21150;&#27861;&#65292;&#31616;&#21333;&#21487;&#34892;&#12290;
</p>

<p>
&#19981;&#36807;&#20551;&#22914;&#25105;&#20204;&#24819;&#29992;'getopts'&#26469;&#22788;&#29702;&#21602;&#65311;&#21160;&#25163;&#23581;&#35797;&#21518;&#65292;&#20320;&#20250;&#21457;&#29616;&#30452;&#25509;&#22312;&#20989;&#25968;&#20013;&#20351;&#29992;'getopts'&#26159;&#20250;&#20986;&#38169;&#30340;&#12290;&#35201;&#22312;&#20989;&#25968;&#20013;&#20351;&#29992;'getopts'&#65292;&#24517;&#39035;&#22312;&#36825;&#20010;&#20989;&#25968;&#20013;&#20351;&#29992;'getopts'&#21069;&#65292;&#23558; <b>OPTIND</b> &#36825;&#20010;&#34987;'getopts'&#20351;&#29992;&#30340;&#29305;&#27530;&#21464;&#37327;&#35774;&#32622;&#20026;&#20989;&#25968;&#23616;&#37096;&#21464;&#37327;&#65292;&#20687;&#36825;&#26679;:
</p>
<div>
<pre><span>function</span> <span>main</span>() {

    <span>local</span> OPTIND

    <span>while </span><span>getopts</span> d:lb:ch OPT;<span>do</span>
       <span>case</span> $<span>OPT</span><span> in</span>
           d)
               <span>file_to_trash</span>=$<span>OPTARG</span>
               trash $<span>file_to_trash</span> <span># </span><span>trash is a function</span>
               ;;
           l)
               print_trashed_file  <span># </span><span>print_trashed_file is a function</span>
               ;;
           b)
               <span>file_to_untrash</span>=$<span>OPTARG</span>
               untrash $<span>file_to_untrash</span> <span># </span><span>untrash is a function</span>
               ;;
           c)
               clean_all           <span># </span><span>clean all is a function</span>
               ;;
           h)
               usage
               <span>exit</span> 0
               ;;
           <span>\?</span>)
               usage
               <span>exit</span> 1
               ;;
       <span>esac</span>
    <span>done</span>
}

main $<span>@</span>
</pre>
</div>

<p>
&#23601;&#26159;&#36825;&#26679;&#21862;!
</p>
</div>
</div>