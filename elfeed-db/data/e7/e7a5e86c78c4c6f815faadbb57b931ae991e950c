<div>
<h2>&#30446;&#24405;</h2>
<div>
<ul>
<li><a href="http://www.zmonster.me#orgheadline1" rel="noopener noreferrer" target="_blank">Redis &#31616;&#20171;</a></li>
<li><a href="http://www.zmonster.me#orgheadline2" rel="noopener noreferrer" target="_blank">&#20174;&#36935;&#21040;&#30340;&#38382;&#39064;&#35828;&#36215;</a></li>
<li><a href="http://www.zmonster.me#orgheadline3" rel="noopener noreferrer" target="_blank">&#29992;&#20110;&#20998;&#26512; Redis &#24615;&#33021;&#30340;&#19968;&#20123;&#21629;&#20196;(&#21442;&#25968;)</a>
<ul>
<li><a href="http://www.zmonster.me#orgheadline4" rel="noopener noreferrer" target="_blank">redis-cli &#21442;&#25968;</a></li>
<li><a href="http://www.zmonster.me#orgheadline5" rel="noopener noreferrer" target="_blank">redis-cli &#23376;&#21629;&#20196;</a></li>
</ul>
</li>
<li><a href="http://www.zmonster.me#orgheadline6" rel="noopener noreferrer" target="_blank">Redis &#20351;&#29992;&#30340;&#19968;&#28857;&#28857;&#32463;&#39564;</a></li>
</ul>
</div>
</div>
<div>
<h2>Redis &#31616;&#20171;</h2>
<div>
<p>
Redis &#26159;&#19968;&#20010; key-value &#20869;&#23384;&#23384;&#20648;&#31995;&#32479;&#65292;&#24182;&#19988;&#25903;&#25345;&#20016;&#23500;&#30340;&#25968;&#25454;&#32467;&#26500;&#65292;&#21253;&#25324;:
</p>
<ol>
<li>string</li>
<li>list</li>
<li>hash table</li>
<li>set(&#38598;&#21512;)</li>
<li>zset(&#26377;&#24207;&#38598;&#21512;)</li>
</ol>

<p>
&#20854;&#20307;&#37327;&#24456;&#23567;&#65292;&#20294;&#21364;&#25903;&#25345;&#20016;&#23500;&#30340;&#25968;&#25454;&#32467;&#26500;&#21644;&#30456;&#24212;&#30340;&#25805;&#20316;&#26041;&#24335;&#65292;&#26159;&#19968;&#20010;&#38750;&#24120;&#22909;&#30340;&#24037;&#20855;&#12290;
</p>

<p>
&#28982;&#32780;&#20687;&#24456;&#22810;&#24037;&#20855;&#19968;&#26679;&#65292;Redis &#20063;&#26377;&#19968;&#20123;&#22353;&#65292;&#25105;&#20063;&#26159;&#34987;&#22353;&#36807;&#19968;&#27573;&#26102;&#38388;&#30340;&hellip;&hellip;
</p>

<p>
&#24403;&#28982;&#65292;&#36825;&#37324;&#23601;&#19981;&#23545; Redis &#30340;&#25968;&#25454;&#32467;&#26500;&#21450;&#25805;&#20316;&#20570;&#36807;&#22810;&#35828;&#26126;&#20102;&#65292;&#21487;&#33021;&#30340;&#35805;&#21333;&#29420;&#20877;&#20889;&#19968;&#31687;&#25991;&#31456;&#65292;&#19981;&#36807;&#32771;&#34385;&#32593;&#19978;&#31867;&#20284;&#30340;&#25991;&#31456;&#23454;&#22312;&#19981;&#23569;&#65292;&#20272;&#35745;&#26159;&#19981;&#20250;&#21435;&#20889;&#20102;&#12290;
</p>
</div>
</div>

<div>
<h2>&#20174;&#36935;&#21040;&#30340;&#38382;&#39064;&#35828;&#36215;</h2>
<div>
<p>
&#30446;&#21069;&#25105;&#36127;&#36131;&#30340;&#19968;&#20010;&#39033;&#30446;&#20351;&#29992;&#30528; Redis &#65292;&#22312; 10 &#26376;&#20013;&#19979;&#26092;&#30340;&#26102;&#20505;&#21457;&#29616;&#24448; Redis &#20889;&#25968;&#25454;&#30340;&#23450;&#26102;&#20219;&#21153;&#39057;&#32321; timeout &#65292;&#21516;&#26102;&#20174;&#21516;&#19968;&#20010; Redis &#35835;&#25968;&#25454;&#30340;&#32447;&#19978;&#39033;&#30446;&#30340; log &#20063;&#26174;&#31034;&#32463;&#24120;&#19968;&#20123;&#35835;&#25805;&#20316;&#32791;&#26102;&#22686;&#38271;&#20102;&#21313;&#20493;&#29978;&#33267;&#26356;&#22810;&#12290;
</p>

<p>
&#21457;&#29616;&#38382;&#39064;&#30340;&#26102;&#20505;&#65292;&#39318;&#20808;&#24576;&#30097;&#26159;&#19981;&#26159;&#33258;&#24049;&#20195;&#30721;&#37324;&#30340;&#36923;&#36753;&#20889;&#24471;&#26377;&#38382;&#39064;&#65292;&#33457;&#20102;&#20004;&#22825;&#26102;&#38388;&#25226;&#30456;&#20851;&#30340;&#20195;&#30721;&#32763;&#26469;&#35206;&#21435;&#30475;&#20102;&#22909;&#20960;&#36941;&#65292;&#34429;&#28982;&#26159;&#26377;&#19968;&#20123;&#22320;&#26041;&#26377;&#24453;&#20248;&#21270;&#65292;&#20294;&#36825;&#20123;&#22320;&#26041;&#30340;&#38382;&#39064;&#26159;&#19981;&#36275;&#20197;&#24341;&#21457;&#21069;&#38754;&#35828;&#30340;&#38382;&#39064;&#30340;&#12290;&#32780;&#22312;&#25105;&#20026;&#20195;&#30721;&#20013;&#27599;&#20010; Redis &#25805;&#20316;&#37117;&#21152;&#19978;&#20102;&#36229;&#26102;&#26816;&#27979;&#21518;&#65292;&#21457;&#29616;&#29978;&#33267;&#36830; <b>get</b> &#36825;&#26679;&#30340;&#25805;&#20316;&#37117;&#20250;&#21457;&#29983;&#36229;&#26102;(&#25152;&#21462;&#30340; key &#30340; value &#24182;&#19981;&#22823;)&#21518;&#65292;&#23601;&#24050;&#32463;&#22823;&#33268;&#26126;&#30333;&#24212;&#35813;&#21644;&#25105;&#30340;&#20195;&#30721;&#27809;&#26377;&#20851;&#31995;&#12290;
</p>

<p>
&#25214; SA &#35201;&#26469; Redis server &#25152;&#22312;&#26381;&#21153;&#22120;&#19978;&#30340;&#24080;&#21495;&#21518;&#24320;&#22987;&#36305;&#33050;&#26412;&#24448; Redis &#20889;&#25968;&#25454;&#65292;&#21516;&#26102;&#30417;&#25511; Redis server &#30340; log &#65292;&#26368;&#21518;&#21457;&#29616;&#20102;&#36825;&#20040;&#19968;&#26465; log:
</p>
<pre>
[25206] 04 Nov 17:34:41.090 * Asynchronous AOF fsync is taking too long (disk is busy?). Writing the AOF buffer without waiting     for fsync to complete, this may slow down Redis.
</pre>

<p>
<b>this may slow down Redis</b> !
</p>

<p>
&#21407;&#26469;&#65292;&#36825;&#20010; Redis server &#30340;&#25345;&#20037;&#21270;&#26041;&#24335;&#26159; RDB+AOF&#65292;&#32780;&#19978;&#36848;&#35686;&#21578;&#20449;&#24687;&#26159;&#22240;&#20026; AOF &#25805;&#20316;&#36896;&#25104;&#30340;&#12290;&#26377;&#20102;&#36825;&#20010;&#26126;&#30830;&#30340;&#35686;&#21578;&#20449;&#24687;&#21518;&#65292;&#20877;&#21435;&#32593;&#19978;&#25628;&#32034;&#23601;&#25214;&#21040;&#20102;&#19981;&#23569;&#31867;&#20284;&#30340;&#26696;&#20363;:
</p>
<ol>
<li><a href="https://engineering.sharethrough.com/blog/2013/06/06/how-redis-took-us-offline-and-what-we-did-about-it/" rel="noopener noreferrer" target="_blank">how redis took us offline and what we did about it</a></li>
<li><a href="https://github.com/twitter/twemproxy/issues/248" rel="noopener noreferrer" target="_blank">logs of timeout in someone second #248</a></li>
</ol>

<p>
&#21508;&#31181;&#36857;&#35937;&#37117;&#35828;&#26126;&#25105;&#36935;&#21040;&#30340;&#38382;&#39064;&#26159;&#21644;&#36825;&#26465;&#35686;&#21578;&#20449;&#24687;&#23494;&#20999;&#30456;&#20851;&#30340;&#65292;&#20110;&#26159;&#22238;&#36807;&#22836;&#37325;&#26032;&#21551;&#21160;&#33050;&#26412;&#65292;&#24182;&#19988;&#30417;&#25511; Redis server &#26085;&#24535;&#20013;&#21253;&#21547; "Asynchronous AOF fsync is taking too long" &#30340;&#20869;&#23481;&#12290;&#32463;&#36807;&#19968;&#20010;&#19979;&#21320;&#30340;&#35266;&#23519;&#65292;&#30830;&#23450;&#36229;&#26102;&#38169;&#35823;&#19982;&#36825;&#26465;&#26085;&#24535;&#26159;&#21516;&#26102;&#20986;&#29616;&#30340;&#12290;
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/redisdebugger.png" alt="redisdebugger.png" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
&#26368;&#21518;&#30340;&#35299;&#20915;&#21150;&#27861;&#26159;&#22312; Redis master &#19978;&#20851;&#38381;&#20102; AOF&#12290;
</p>
</div>
</div>

<div>
<h2>&#29992;&#20110;&#20998;&#26512; Redis &#24615;&#33021;&#30340;&#19968;&#20123;&#21629;&#20196;(&#21442;&#25968;)</h2>
<div>
<p>
&#37117;&#26159;&#22312;&#35299;&#20915;&#19978;&#38754;&#25552;&#21040;&#30340;&#38382;&#39064;&#30340;&#36807;&#31243;&#20013;&#65292;&#25152;&#20102;&#35299;&#21040;&#30340; tricks&#12290;
</p>
</div>

<div>
<h3>redis-cli &#21442;&#25968;</h3>
<div>
<ul>
<li><p>
&ndash;bigkeys
</p>

<div>

<pre>redis-cli -h &lt;host&gt; -p &lt;port&gt; -n &lt;db&gt; --bigkeys
</pre>
</div>

<p>
&#36825;&#26465;&#21629;&#20196;&#20250;&#20174;&#25351;&#23450;&#30340; Redis DB &#20013;&#25345;&#32493;&#37319;&#26679;&#65292;&#23454;&#26102;&#36755;&#20986;&#24403;&#26102;&#24471;&#21040;&#30340; <b>value</b> &#21344;&#29992;&#31354;&#38388;&#26368;&#22823;&#30340; <b>key</b> &#20540;&#65292;&#24182;&#22312;&#26368;&#21518;&#32473;&#20986;&#21508;&#31181;&#25968;&#25454;&#32467;&#26500;&#30340; <b>biggest key</b> &#30340;&#24635;&#32467;&#25253;&#21578;:
</p>
<pre>
user $ redis-cli -h myhost -p 12345 --bigkeys

# Scanning the entire keyspace to find biggest keys as well as
# average sizes per key type.  You can use -i 0.1 to sleep 0.1 sec
# per 100 SCAN commands (not usually needed).

[00.00%] Biggest hash   found so far 'idx:&#21516;&#31867;&#39033;' with 1 fields
[00.00%] Biggest hash   found so far 'idx:&#26684;&#28857;' with 3 fields
[00.00%] Biggest hash   found so far 'idx:&#20219;&#24847;' with 14 fields
[02.29%] Biggest hash   found so far 'idx:&#35774;' with 16 fields
[02.29%] Biggest hash   found so far 'idx:4' with 69 fields
[04.45%] Biggest set    found so far 'indexed_word_set' with 1482 members
[05.93%] Biggest hash   found so far 'idx:c' with 159 fields
[11.79%] Biggest hash   found so far 'idx:&#30340;' with 196 fields

-------- summary -------

Sampled 1484 keys in the keyspace!
Total key length in bytes is 13488 (avg len 9.09)

Biggest    set found 'indexed_word_set' has 1482 members
Biggest   hash found 'idx:&#30340;' has 196 fields

0 strings with 0 bytes (00.00% of keys, avg size 0.00)
0 lists with 0 items (00.00% of keys, avg size 0.00)
2 sets with 1710 members (00.13% of keys, avg size 855.00)
1482 hashs with 6731 fields (99.87% of keys, avg size 4.54)
0 zsets with 0 members (00.00% of keys, avg size 0.00)
</pre>

<p>
&#36825;&#26465;&#21629;&#20196;&#32473;&#20986;&#30340; "big key" &#65292;&#26159;&#20540;&#24471;&#21435;&#20998;&#26512;&#19968;&#19979;&#30340;&#12290;
</p></li>

<li><p>
&ndash;latency, &ndash;latency-history
</p>

<p>
&#36825;&#20004;&#26465;&#21629;&#20196;&#29992;&#26469;&#27979;&#35797; Redis &#26381;&#21153;&#31471;&#30340;&#21709;&#24212;&#24310;&#36831;&#65292;&ndash;latency &#30340;&#36755;&#20986;&#26159;&#36825;&#26679;&#30340;
</p>
<pre>
min: 7, max: 1230, avg: 66.22 (89 samples)
</pre>

<p>
&ndash;latency-history &#30340;&#36755;&#20986;&#26159;&#36825;&#26679;&#30340;:
</p>
<pre>
min: 7, max: 3332, avg: 157.41 (91 samples) -- 15.23 seconds range
min: 6, max: 774, avg: 75.69 (176 samples) -- 15.10 seconds range
min: 7, max: 1631, avg: 93.49 (147 samples) -- 15.23 seconds range
min: 7, max: 714, avg: 67.90 (194 samples) -- 15.14 seconds range
min: 7, max: 809, avg: 95.09 (143 samples) -- 15.04 seconds range
</pre>

<p>
&#20004;&#32773;&#30340;&#21306;&#21035;&#22312;&#20110;&#21069;&#32773;&#26174;&#31034;&#30340;&#26159;&#25345;&#32493;&#30340;&#37319;&#26679;&#32467;&#26524;&#65292;&#32780;&#21518;&#32773;&#21017;&#21482;&#36755;&#20986;&#19968;&#27573;&#26102;&#38388;&#20869;&#30340;&#37319;&#26679;&#32467;&#26524;&#12290;
</p>

<p>
&#29992;&#36825;&#20004;&#20010;&#21442;&#25968;&#21487;&#20197;&#21028;&#26029;&#23458;&#25143;&#31471;&#19982;&#26381;&#21153;&#31471;&#20043;&#38388;&#30340;&#32593;&#32476;&#36890;&#20449;&#36896;&#25104;&#30340;&#24310;&#36831;&#23545;&#25972;&#20307;&#24310;&#36831;&#30340;&#24433;&#21709;&#65292;&#26041;&#27861;&#26159;&#22312; Redis Server &#25152;&#22312;&#30340;&#26381;&#21153;&#22120;&#19978;&#20351;&#29992; &ndash;latency/&ndash;latency-history &#24471;&#21040;&#22823;&#33268;&#30340;&#24310;&#36831;&#32467;&#26524;&#65292;&#28982;&#21518;&#22312;&#23458;&#25143;&#31471;&#25152;&#22312;&#26426;&#22120;&#19978;&#21516;&#26679;&#24471;&#21040;&#24310;&#36831;&#24773;&#20917;&#36827;&#34892;&#23545;&#27604;&#12290;
</p></li>
</ul>
</div>
</div>

<div>
<h3>redis-cli &#23376;&#21629;&#20196;</h3>
<div>
<ul>
<li><p>
slowlog &#21629;&#20196;
</p>

<p>
&#40664;&#35748;&#30340; Redis server &#37197;&#32622;&#20013;&#26377;&#36825;&#20040;&#20004;&#26465;:
</p>
<div>

<pre>slowlog-log-slower-than 10000
slowlog-max-len 128
</pre>
</div>

<p>
&#36825;&#20004;&#26465;&#37197;&#32622;&#20250;&#20135;&#29983;&#36825;&#26679;&#30340;&#25928;&#26524;: &#22914;&#26524;&#19968;&#26465;&#21629;&#20196;&#30340;&#21709;&#24212;&#26102;&#38388;&#36229;&#36807;&#20102; 10000us (&#21363; 10ms) &#65292;&#37027;&#20040;&#23558;&#20250;&#20316;&#20026; "slow command" &#34987;&#35760;&#24405;&#65292;&#24182;&#19988;&#23558;&#21482;&#20445;&#30041;&#26368;&#26032;&#30340; <b>128 &#26465;</b> &#35760;&#24405;&#12290;
</p>

<p>
&#38656;&#35201;&#35828;&#26126;&#30340;&#26159;&#65292;&#36825;&#37324;&#25152;&#35828;&#30340; <b>&#21709;&#24212;&#26102;&#38388;</b> &#19981;&#21253;&#25324;&#23458;&#25143;&#31471;&#19982;&#26381;&#21153;&#31471;&#20043;&#38388;&#30340;&#36890;&#20449;&#24320;&#38144;&#65292;&#20165;&#20165;&#25351;&#21629;&#20196;&#22312; Redis server &#20013;&#30340;&#25191;&#34892;&#26102;&#38388;&#28040;&#32791;&#12290;
</p>

<p>
&#20351;&#29992; slowlog &#36825;&#20010;&#23376;&#21629;&#20196;&#21487;&#20197;&#33719;&#21462;&#24403;&#21069;&#30340;&#36825;&#20123;&#35760;&#24405;:
</p>
<pre>
127.0.0.1:6379&gt; slowlog get 3
1) 1) (integer) 26
   2) (integer) 1450253133
   3) (integer) 43097
   4) 1) "flushdb"
2) 1) (integer) 25
   2) (integer) 1450252804
   3) (integer) 33115
   4) 1) "flushdb"
3) 1) (integer) 24
   2) (integer) 1450248951
   3) (integer) 3328650
   4) 1) "flushdb"
</pre>

<p>
&#22312;&#19981;&#25351;&#23450;&#35760;&#24405;&#25968;&#37327;&#30340;&#24773;&#20917;&#19979;(slowlog get)&#65292;&#40664;&#35748;&#36820;&#22238; 10 &#26465;&#35760;&#24405;&#65292;&#27599;&#26465;&#35760;&#24405;&#21253;&#21547;&#22235;&#20010;&#23383;&#27573;&#65292;&#20197;&#19979;&#38754;&#36825;&#20010;&#20026;&#20363;&#26469;&#35828;&#26126;
</p>
<pre>
1) (integer) 26
2) (integer) 1450253133
3) (integer) 43097
4) 1) "flushdb"
</pre>

<p>
&#31532;&#19968;&#20010;&#23383;&#27573;&#34920;&#31034;&#35813;&#26465;&#35760;&#24405;&#22312;&#25152;&#26377;&#24930;&#26085;&#24535;&#20013;&#30340;&#24207;&#21495;&#65292;&#26368;&#26032;&#30340;&#35760;&#24405;&#34987;&#23637;&#31034;&#22312;&#26368;&#21069;&#38754;&#65307;
</p>

<p>
&#31532;&#20108;&#20010;&#23383;&#27573;&#26159;&#36825;&#26465;&#35760;&#24405;&#34987;&#35760;&#24405;&#26102;&#30340;&#31995;&#32479;&#26102;&#38388;&#65292;&#21487;&#20197;&#29992; <b>date</b> &#21629;&#20196;&#26469;&#23558;&#20854;&#36716;&#25442;&#20026;&#21451;&#22909;&#30340;&#26684;&#24335;:
</p>
<div>

<pre>linusp $ date -d @1450253133
2015&#24180; 12&#26376; 16&#26085; &#26143;&#26399;&#19977; 16:05:33 CST
</pre>
</div>

<p>
&#31532;&#19977;&#20010;&#23383;&#27573;&#34920;&#31034;&#36825;&#26465;&#21629;&#20196;&#30340;&#21709;&#24212;&#26102;&#38388;&#65292;&#21333;&#20301;&#20026; us (&#24494;&#31186;)&#65307;
</p>

<p>
&#31532;&#22235;&#20010;&#23383;&#27573;&#20026;&#23545;&#24212;&#30340; Redis &#25805;&#20316;&#12290;
</p>

<p>
&#22240;&#27492;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#30340;&#21547;&#20041;&#23601;&#26159;: &#22312; 2015 &#24180; 12 &#26376; 16 &#26085; 16 &#26102; 5 &#20998; 33 &#31186;&#25191;&#34892;&#30340; flushdb &#25805;&#20316;&#32791;&#26102; 43ms &#65292;&#22240;&#20026;&#36229;&#36807;&#20102;&#35774;&#23450;&#30340;&#20540;&#34987;&#35760;&#24405;&#21040;&#24930;&#26085;&#24535;&#20013;&#12290;
</p></li>

<li><p>
info
</p>

<p>
&#39038;&#21517;&#24605;&#20041;&#65292;&#36825;&#20010;&#23376;&#21629;&#20196;&#29992;&#26469;&#33719;&#21462; Redis server &#30340;&#19968;&#20123;&#20449;&#24687;&#65292;&#36825;&#20123;&#20449;&#24687;&#25353;&#29031;&#20869;&#23481;&#34987;&#20998;&#25104;&#20102;&#24456;&#22810;&#37096;&#20998;&#65292;&#21487;&#20197;&#29992;&#39069;&#22806;&#30340;&#21442;&#25968;&#26469;&#21333;&#29420;&#33719;&#21462;&#65292;&#22914;&#19979;:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col>

<col>
</colgroup>
<thead>
<tr>
<th scope="col">&#21442;&#25968;&#21517;</th>
<th scope="col">&#35828;&#26126;</th>
</tr>
</thead>
<tbody>
<tr>
<td>server</td>
<td>&#33719;&#21462; server &#20449;&#24687;&#65292;&#21253;&#25324; version, OS, port &#31561;&#20449;&#24687;</td>
</tr>

<tr>
<td>clients</td>
<td>&#33719;&#21462; clients &#20449;&#24687;&#65292;&#22914;&#23458;&#25143;&#31471;&#36830;&#25509;&#25968;&#31561;</td>
</tr>

<tr>
<td>memory</td>
<td>&#33719;&#21462; server &#30340;&#20869;&#23384;&#20449;&#24687;&#65292;&#21253;&#25324;&#24403;&#21069;&#20869;&#23384;&#28040;&#32791;&#12289;&#20869;&#23384;&#20351;&#29992;&#23792;&#20540;</td>
</tr>

<tr>
<td>persistence</td>
<td>&#33719;&#21462; server &#30340;&#25345;&#20037;&#21270;&#37197;&#32622;&#20449;&#24687;</td>
</tr>

<tr>
<td>stats</td>
<td>&#33719;&#21462; server &#30340;&#19968;&#20123;&#22522;&#26412;&#32479;&#35745;&#20449;&#24687;&#65292;&#22914;&#22788;&#29702;&#36807;&#30340;&#36830;&#25509;&#25968;&#37327;&#31561;</td>
</tr>

<tr>
<td>replication</td>
<td>&#33719;&#21462; server &#30340;&#20027;&#20174;&#37197;&#32622;&#20449;&#24687;</td>
</tr>

<tr>
<td>cpu</td>
<td>&#33719;&#21462; server &#30340; CPU &#20351;&#29992;&#20449;&#24687;</td>
</tr>

<tr>
<td>keyspace</td>
<td>&#33719;&#21462; server &#20013;&#21508;&#20010; DB &#30340; key &#30340;&#25968;&#37327;</td>
</tr>

<tr>
<td>cluster</td>
<td>&#33719;&#21462;&#38598;&#32676;&#33410;&#28857;&#20449;&#24687;&#65292;&#20165;&#22312;&#24320;&#21551;&#38598;&#32676;&#21518;&#21487;&#35265;</td>
</tr>

<tr>
<td>commandstas</td>
<td>&#33719;&#21462;&#27599;&#31181;&#21629;&#20196;&#30340;&#32479;&#35745;&#20449;&#24687;&#65292;&#38750;&#24120;&#26377;&#29992;</td>
</tr>
</tbody>
</table>

<p>
&#25361;&#20960;&#20010;&#20010;&#20154;&#35273;&#24471;&#26377;&#29992;&#30340;&#37096;&#20998;&#20877;&#35814;&#32454;&#35828;&#26126;&#19968;&#19979;.
</p>

<ul>
<li><p>
info memory
</p>

<p>
&#36755;&#20986;&#22914;&#19979;:
</p>
<pre>
# Memory
used_memory:17348250392
used_memory_human:16.16G
used_memory_rss:14339567616
used_memory_peak:17348362312
used_memory_peak_human:16.16G
used_memory_lua:33792
mem_fragmentation_ratio:0.83
mem_allocator:jemalloc-3.0.0
</pre>

<p>
&#20102;&#35299; Redis server &#30340;&#20869;&#23384;&#21344;&#29992;&#26159;&#24456;&#26377;&#24517;&#35201;&#30340;
</p></li>

<li><p>
info keyspace
</p>

<p>
&#36755;&#20986;&#22914;&#19979;:
</p>
<pre>
db0:keys=52021100,expires=0,avg_ttl=0
db1:keys=520062,expires=0,avg_ttl=0
db2:keys=559810,expires=0,avg_ttl=0
db4:keys=513887,expires=0,avg_ttl=0
</pre>

<p>
&#30001;&#20110; Redis &#35201;&#20026;&#27599;&#20010; key &#32500;&#25252;&#19968;&#20123;&#20837;&#21475;&#20449;&#24687;&#65292;&#22240;&#27492; key &#20250;&#27604; value &#20013;&#30340;&#23545;&#35937;&#39069;&#22806;&#28040;&#32791;&#19968;&#20123;&#20869;&#23384;&#65292;&#24403; key &#30340;&#25968;&#37327;&#22826;&#22810;&#30340;&#26102;&#20505;&#20250;&#22810;&#28040;&#32791;&#19981;&#23569;&#20869;&#23384;&#12290;&#19968;&#20123;&#20248;&#21270; Redis &#20869;&#23384;&#21344;&#29992;&#30340;&#26041;&#27861;&#22522;&#26412;&#37117;&#26159;&#22522;&#20110;&#20943;&#23569; key &#30340;&#25968;&#37327;&#20197;&#21450;&#20943;&#23569; key &#30340;&#24179;&#22343;&#38271;&#24230;&#36825;&#20004;&#20010;&#24605;&#36335;&#12290;
</p>

<p>
key &#30340;&#25968;&#37327;&#22826;&#22810;&#26102;&#21487;&#20197;&#20351;&#29992; hash &#32467;&#26500;&#23558; key &#36827;&#34892;&#20998;&#38548;&#25104;&#20004;&#37096;&#20998;&#26469;&#20943;&#23569;&#25968;&#37327;&#65292;&#24403;&#28982;&#36825;&#20010;&#35201;&#30475;&#26159;&#21542;&#33021;&#28385;&#36275;&#20855;&#20307;&#30340;&#19994;&#21153;&#12289;&#21151;&#33021;&#38656;&#27714;&#20102;&#12290;
</p></li>

<li><p>
info commandstats
</p>

<p>
&#20854;&#36755;&#20986;&#22914;&#19979;:
</p>
<pre>
cmdstat_get:calls=774811168,usec=2567380170,usec_per_call=3.31
cmdstat_set:calls=4616783,usec=17308580,usec_per_call=3.75
cmdstat_append:calls=290375669,usec=2051415709,usec_per_call=7.06
cmdstat_exists:calls=41374218,usec=72561479,usec_per_call=1.75
cmdstat_sadd:calls=60640,usec=540252,usec_per_call=8.91
cmdstat_sismember:calls=3,usec=16,usec_per_call=5.33
cmdstat_smembers:calls=1863495,usec=253706917,usec_per_call=136.15
cmdstat_incrby:calls=114499073,usec=157843782,usec_per_call=1.38
cmdstat_keys:calls=1,usec=79743,usec_per_call=79743.00
cmdstat_multi:calls=4618103,usec=6087466,usec_per_call=1.32
cmdstat_exec:calls=4618103,usec=2597435761,usec_per_call=562.45
cmdstat_replconf:calls=335,usec=512,usec_per_call=1.53
cmdstat_flushdb:calls=5,usec=842393,usec_per_call=168478.59
cmdstat_info:calls=825297,usec=39131868,usec_per_call=47.42
cmdstat_slowlog:calls=23,usec=22646,usec_per_call=984.61
......
</pre>

<p>
&#36755;&#20986;&#20013;&#21253;&#21547;&#22788;&#29702;&#36807;&#30340;&#27599;&#19968;&#31181;&#21629;&#20196;&#30340;&#35843;&#29992;&#27425;&#25968;&#12289;&#28040;&#32791;&#30340;&#24635; CPU &#26102;&#38388;(&#21333;&#20301; ms)&#20197;&#21450;&#24179;&#22343; CPU &#32791;&#26102;&#65292;&#36825;&#23545;&#20102;&#35299;&#33258;&#24049;&#30340;&#31243;&#24207;&#25152;&#20351;&#29992;&#30340; Redis &#25805;&#20316;&#24773;&#20917;&#38750;&#24120;&#26377;&#29992;&#12290;
</p></li>
</ul></li>
</ul>
</div>
</div>
</div>

<div>
<h2>Redis &#20351;&#29992;&#30340;&#19968;&#28857;&#28857;&#32463;&#39564;</h2>
<div>
<ol>
<li>&#31649;&#29702;&#22909;&#33258;&#24049;&#30340; key&#65292;&#27604;&#22914;&#29992;&#19968;&#20010; set &#26469;&#23384;&#25918;&#25152;&#26377;&#21516;&#31867;&#22411;&#30340; key&#65292;&#36825;&#26679;&#21487;&#20197;&#36991;&#20813;&#20351;&#29992; keys &#26469;&#33719;&#21462;&#35813;&#31867;&#22411;&#25152;&#26377; key&#65292;&#30001;&#20110; Redis &#26159;&#21333;&#32447;&#31243;&#30340;&#65292;&#22312;&#25968;&#25454;&#37327;&#22823;&#30340;&#24773;&#20917;&#19979;&#23558;&#20250;&#38459;&#22622; Redis &#20013;&#20854;&#20182;&#30340;&#25805;&#20316;</li>
<li>&#22914;&#26524;&#19981;&#33021;&#36991;&#20813;&#20351;&#29992; keys &#25805;&#20316;&#65292;&#37027;&#20040;&#20351;&#29992; scan &#26469;&#26367;&#20195;&#65292;&#23558;&#36941;&#21382; Redis DB &#20013;&#25152;&#26377; key &#30340;&#25805;&#20316;&#25918;&#21040;&#23458;&#25143;&#31471;&#26469;&#20570;&#65292;&#36825;&#26679;&#23601;&#19981;&#20250;&#23548;&#33268;&#20854;&#20182;&#25805;&#20316;&#34987;&#38459;&#22622;&#20102;</li>
<li>&#22312;&#25968;&#25454;&#37327;&#22823;&#30340;&#24773;&#20917;&#19979;&#65292;key &#25110; value &#30340;&#24494;&#23567;&#30340;&#21387;&#32553;&#20063;&#33021;&#24102;&#26469;&#19981;&#23567;&#30340;&#20869;&#23384;&#20351;&#29992;&#25552;&#39640;</li>
<li>hash &#32467;&#26500;&#26159;&#20010;&#22909;&#19996;&#35199;&#65292;&#20294;&#26159;&#23427;&#21482;&#25903;&#25345;&#19968;&#32423; hash&#65292;&#25152;&#20197;&#22914;&#26524;&#38656;&#35201;&#20351;&#29992;&#22810;&#32423; hash&#65292;&#37027;&#23601;&#36827;&#34892;&#24207;&#21015;&#21270;&#21543;</li>
<li>&#27880;&#24847;&#23458;&#25143;&#31471;&#21644;&#26381;&#21153;&#31471;&#20043;&#38388;&#30340;&#32593;&#32476;&#36890;&#20449;&#24773;&#20917;(&ndash;latency/&ndash;latency-history)</li>
<li>Redis &#30340; python &#25509;&#21475;&#36820;&#22238;&#30340; key &#30340;&#31867;&#22411;&#21644; value &#20013;&#30340;&#26368;&#23567;&#32467;&#26500;&#30340;&#31867;&#22411;&#37117;&#26159; string&#65292;&#35760;&#24471;&#36716;&#25442;&#25104;&#33258;&#24049;&#38656;&#35201;&#30340;&#31867;&#22411;</li>
</ol>
</div>
</div>