<div>
<h2>&#30446;&#24405;</h2>
<div>
<ul>
<li><a href="http://www.zmonster.me#orgheadline1" rel="noopener noreferrer" target="_blank">ucc&#31616;&#20171;</a></li>
<li><a href="http://www.zmonster.me#orgheadline2" rel="noopener noreferrer" target="_blank">&#20027;&#20307;&#26694;&#26550;</a>
<ul>
<li><a href="http://www.zmonster.me#orgheadline3" rel="noopener noreferrer" target="_blank">&#31532;&#19968;&#37096;&#20998;&#65306;&#21442;&#25968;&#26816;&#26597;&#65306;</a></li>
<li><a href="http://www.zmonster.me#orgheadline4" rel="noopener noreferrer" target="_blank">&#31532;&#20108;&#37096;&#20998;&#65306;&#29615;&#22659;&#20934;&#22791;</a></li>
<li><a href="http://www.zmonster.me#orgheadline5" rel="noopener noreferrer" target="_blank">&#31532;&#19977;&#37096;&#20998;&#65306;&#21442;&#25968;&#35299;&#26512;</a></li>
<li><a href="http://www.zmonster.me#orgheadline6" rel="noopener noreferrer" target="_blank">&#31532;&#22235;&#37096;&#20998;&#65306;&#21160;&#20316;&#25191;&#34892;</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div>
<h2>ucc&#31616;&#20171;</h2>
<div>
<p>
<a href="http://ucc.sourceforge.net/" rel="noopener noreferrer" target="_blank">ucc</a> &#26159;&#26089;&#20123;&#24180;&#19968;&#20301;&#28165;&#21326;&#22823;&#23398;&#30340;&#23398;&#29983;&#32534;&#20889;&#30340;x86&#24179;&#21488;&#19978;&#30340;C&#35821;&#35328;&#32534;&#35793;&#22120;&#65292;&#36981;&#20174;ANSI C89&#26631;&#20934;&#65292;&#33021;&#22312;Linux/Windows&#31995;&#32479;&#19978;&#27491;&#30830;&#32534;&#35793;&#33258;&#36523;&#24182;&#25104;&#21151;&#36816;&#34892;&#12290;&#23427;&#26377;&#20197;&#19979;&#29305;&#28857;&#65306;
</p>
<ol>
<li>&#20195;&#30721;&#32467;&#26500;&#28165;&#26224;&#65292;&#26377;&#35814;&#32454;&#30340;&#25991;&#26723;&#35762;&#36848;&#23427;&#30340;&#23454;&#29616;(&#20013;&#33521;&#25991;&#30342;&#26377;)</li>
<li>&#20351;&#29992;&#19977;&#22320;&#22336;&#30721;&#20316;&#20026;&#20013;&#38388;&#30721;&#65292;&#26500;&#24314;&#20102;&#30001;&#22522;&#26412;&#22359;&#32452;&#25104;&#30340;&#25511;&#21046;&#27969;&#22270;&#65292;&#36866;&#21512;&#24456;&#22810;&#20248;&#21270;&#31639;&#27861;</li>
<li>&#36731;&#37327;&#32423;&#65292;&#32534;&#35793;&#36895;&#24230;&#24555;&#65292;&#35789;&#27861;&#20998;&#26512;&#22120;&#12289;&#35821;&#27861;&#20998;&#26512;&#22120;&#21644;&#30446;&#26631;&#20195;&#30721;&#29983;&#25104;&#22120;&#37117;&#26159;&#33258;&#34892;&#23454;&#29616;&#30340;</li>
</ol>


<p>
&#22312;&#23398;&#26657;&#23398;&#20064;&#32534;&#35793;&#21407;&#29702;&#35838;&#31243;&#30340;&#26102;&#20505;&#65292;&#22312;&#23454;&#29616;C&#35821;&#35328;&#35789;&#27861;&#20998;&#26512;&#22120;&#30340;&#26102;&#20505;&#20511;&#37492;&#36807;ucc&#30340;&#20195;&#30721;&#32467;&#26500;&#65292;&#24403;&#26102;ucc&#30340;&#31616;&#27905;&#20195;&#30721;&#32467;&#26500;&#32473;&#25105;&#30041;&#19979;&#20102;&#38750;&#24120;&#28145;&#21051;&#30340;&#26144;&#20687;&#65292;&#37027;&#26159;&#25105;&#31532;&#19968;&#27425;&#20174;&#21035;&#20154;&#30340;&#20195;&#30721;&#37324;&#20307;&#20250;&#21040;&#19968;&#31181;"&#32654;&#24863;"&#65292;&#25152;&#20197;&#19968;&#30452;&#37117;&#26377;&#25171;&#31639;&#32454;&#35835;&#19968;&#36941;&#20854;&#23454;&#29616;&#65292;&#21487;&#24796;&#20063;&#26159;&#19968;&#30452;&#26410;&#26366;&#20184;&#35832;&#23454;&#36341;&#12290;&#29616;&#22312;&#20915;&#23450;&#27599;&#22825;&#33457;&#28857;&#26102;&#38388;&#65292;&#19968;&#28857;&#19968;&#28857;&#23436;&#25104;&#36825;&#20010;&#30446;&#26631;&#21543;&#12290;
</p>

<p>
&#21999;&#65292;&#39034;&#20415;&#25226;&#32534;&#35793;&#21407;&#29702;&#30340;&#19996;&#35199;&#22797;&#20064;&#19968;&#36941;&#12290;
</p>
</div>
</div>

<div>
<h2>&#20027;&#20307;&#26694;&#26550;</h2>
<div>
<p>
ucc.c&#26159;&#32534;&#35793;&#22120;&#30340;&#20837;&#21475;&#27169;&#22359;&#65292;&#20854;&#20013;&#30340;main&#20989;&#25968;&#22914;&#19979;&#25152;&#31034;&#65306;
</p>
<div>

<pre><span>int</span> <span>main</span>(<span>int</span> <span>argc</span>, <span>char</span> *<span>argv</span>[])
{
    <span>int</span> <span>i</span>;

    <span>if</span> (argc &lt;= 1)
    {
        ShowHelp();
        exit(0);
    }

    Option.oftype = EXE_FILE;
    SetupToolChain();
    Command = Alloc((argc + 60) * <span>sizeof</span>(<span>char</span> *));
    Command[0] = <span>NULL</span>;

    i = ParseCmdLine(--argc, ++argv);
    <span>for</span> (; i &lt; argc; ++i)
    {
        <span>if</span> (argv[i][0] == <span>'-'</span>)
        {
            Option.linput = ListAppend(Option.linput, argv[i]);
        }
        <span>else</span>
        {
            AddFile(argv[i]);
        }
    }

    <span>for</span> (i = PP_FILE; i &lt;= Option.oftype; ++i)
    {
        <span>if</span> (InvokeProgram(i) != 0)
        {
            RemoveFiles();
            fprintf(stderr, <span>"ucc invoke command error:"</span>);
            PrintCommand();
            <span>return</span> -1;
        }
    }

    RemoveFiles();
    <span>return</span> 0;
}
</pre>
</div>

<p>
&#21487;&#20197;&#24456;&#26126;&#26174;&#22320;&#21457;&#29616;&#65292;&#25972;&#20010;main&#20989;&#25968;&#21487;&#20197;&#32454;&#20998;&#20026;&#20197;&#19979;&#20960;&#37096;&#20998;&#65306;
</p>
<ul>
<li>&#21442;&#25968;&#26816;&#26597;</li>
<li>&#29615;&#22659;&#20934;&#22791;</li>
<li>&#21442;&#25968;&#35299;&#26512;</li>
<li>&#21160;&#20316;&#25191;&#34892;</li>
</ul>
</div>

<div>
<h3>&#31532;&#19968;&#37096;&#20998;&#65306;&#21442;&#25968;&#26816;&#26597;&#65306;</h3>
<div>
<div>

<pre><span>if</span> (argc &lt;= 1)
{
    ShowHelp();
    exit(0);
}
</pre>
</div>
<p>
&#36825;&#37324;&#21482;&#26159;&#36890;&#36807;&#21442;&#25968;&#20010;&#25968;&#26469;&#36827;&#34892;&#21028;&#26029;&#65292;&#22914;&#26524;&#36816;&#34892;&#26102;&#26410;&#24102;&#21442;&#25968;&#65292;&#21017;&#25171;&#21360;&#24110;&#21161;&#20449;&#24687;&#12290;
</p>
</div>
</div>

<div>
<h3>&#31532;&#20108;&#37096;&#20998;&#65306;&#29615;&#22659;&#20934;&#22791;</h3>
<div>
<div>

<pre>Option.oftype = EXE_FILE;
SetupToolChain();
Command = Alloc((argc + 60) * <span>sizeof</span>(<span>char</span> *));
Command[0] = <span>NULL</span>;
</pre>
</div>
<p>
&#36825;&#37324;&#30340; <b>Option</b> &#26159;&#19968;&#20010;&#20840;&#23616;&#21464;&#37327;&#65292;&#23454;&#38469;&#26159;&#19968;&#20010;&#32467;&#26500;&#23545;&#35937;&#65292;&#29992;&#26469;&#23384;&#25918;ucc&#32534;&#35793;C&#35821;&#35328;&#28304;&#20195;&#30721;&#36807;&#31243;&#20013;&#38656;&#35201;&#30340;&#19968;&#20123;&#36873;&#39033;&#65292;&#20854;&#20013;&#19968;&#37096;&#20998;&#26159;&#26681;&#25454;&#22806;&#37096;&#21442;&#25968;&#24471;&#21040;&#30340;&#12290;
</p>

<p>
<b>SetupToolChain()</b> &#29992;&#26469;&#35774;&#32622;&#24037;&#20855;&#38142;&#65292;ucc.c&#23454;&#38469;&#19978;&#24182;&#19981;&#26159;&#32534;&#35793;&#22120;&#30340;&#23454;&#38469;&#23454;&#29616;&#65292;&#32780;&#26159;&#19968;&#20010;&#21644;&#25805;&#20316;&#31995;&#32479;&#12289;ucc&#32534;&#35793;&#22120;&#36827;&#34892;&#36866;&#37197;&#30340;&#39537;&#21160;&#22120;&#12290;ucc&#24182;&#27809;&#26377;&#23454;&#29616;&#39044;&#22788;&#29702;&#22120;&#12289;&#27719;&#32534;&#22120;&#21644;&#38142;&#25509;&#22120;&#65292;&#20165;&#23454;&#29616;&#20102;&#35789;&#27861;&#20998;&#26512;&#22120;&#12289;&#35821;&#27861;&#20998;&#26512;&#22120;&#21644;&#30446;&#26631;&#20195;&#30721;&#29983;&#25104;&#22120;&#65292;&#22240;&#27492;&#38656;&#35201;&#25805;&#20316;&#31995;&#32479;&#19978;&#30340;&#24037;&#20855;&#26469;&#20570;&#23427;&#25152;&#26410;&#20570;&#30340;&#20107;&#24773;&#12290;&#22312;Linux&#19979;&#65292;&#36825;&#20010;&#20989;&#25968;&#26159;&#31354;&#30340;&#65292;&#22240;&#20026;&#36890;&#24120;Linux&#31995;&#32479;&#37117;&#26377;&#23436;&#25972;&#30340;&#24037;&#20855;&#38142;&#65292;&#19981;&#38656;&#35201;&#20877;&#39069;&#22806;&#35774;&#32622;&#65307;&#22312;Windows&#19979;&#65292;&#36825;&#20010;&#20989;&#25968;&#20250;&#23558;VS&#30340;&#30456;&#20851;&#24037;&#20855;&#20316;&#20026;&#24037;&#20855;&#38142;&#12290;
</p>

<p>
<b>Command</b> &#20063;&#26159;&#19968;&#20010;&#20840;&#23616;&#21464;&#37327;&#65292;&#20174;&#20854;&#21517;&#23383;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#29468;&#24819;&#21040;&#23427;&#26159;&#29992;&#26469;&#23384;&#25918;&#35201;&#25191;&#34892;&#30340;&#21629;&#20196;&#30340;&#65292;&#20107;&#23454;&#19978;&#23427;&#20063;&#30830;&#23454;&#26159;&#12290;&#19978;&#38754;&#20063;&#35828;&#21040;&#20102;&#65292;&#22312;&#36825;&#20010;&#20027;&#27169;&#22359;&#20013;&#23454;&#38469;&#19978;&#26159;&#38656;&#35201;&#35843;&#29992;&#20854;&#20182;&#22806;&#37096;&#21629;&#20196;&#30340;&#65292;&#22914;&#31995;&#32479;&#30340;&#39044;&#22788;&#29702;&#22120;&#12289;&#27719;&#32534;&#22120;&#21644;&#38142;&#25509;&#22120;&#65292;&#20197;&#21450;ucc&#33258;&#36523;&#30340;&#32534;&#35793;&#22120;&#23454;&#29616;ucl&#12290;
</p>
</div>
</div>

<div>
<h3>&#31532;&#19977;&#37096;&#20998;&#65306;&#21442;&#25968;&#35299;&#26512;</h3>
<div>
<div>

<pre>i = ParseCmdLine(--argc, ++argv);
<span>for</span> (; i &lt; argc; ++i)
{
    <span>if</span> (argv[i][0] == <span>'-'</span>)
    {
        Option.linput = ListAppend(Option.linput, argv[i]);
    }
    <span>else</span>
    {
        AddFile(argv[i]);
    }
}
</pre>
</div>
<p>
&#21442;&#25968;&#35299;&#26512;&#26102;&#65292;&#36825;&#37324;&#24182;&#27809;&#26377;&#36890;&#36807; <b>getopt</b> &#31561;&#20989;&#25968;&#26469;&#36827;&#34892;&#22788;&#29702;&#65292;&#32780;&#26159;&#36880;&#20010;&#22788;&#29702;&#21442;&#25968;&#65292;&#23558;&#20854;&#20998;&#20026;&#36873;&#39033;&#25110;&#32773;&#25991;&#20214;&#21517;&mdash;&mdash;&#30475;&#19978;&#38754;&#30340;&#20195;&#30721;&#65292;&#19968;&#30446;&#20102;&#28982;&#12290;
</p>
</div>
</div>

<div>
<h3>&#31532;&#22235;&#37096;&#20998;&#65306;&#21160;&#20316;&#25191;&#34892;</h3>
<div>
<div>

<pre><span>for</span> (i = PP_FILE; i &lt;= Option.oftype; ++i)
{
    <span>if</span> (InvokeProgram(i) != 0)
    {
        RemoveFiles();
        fprintf(stderr, <span>"ucc invoke command error:"</span>);
        PrintCommand();
        <span>return</span> -1;
    }
}
</pre>
</div>
<p>
&#36825;&#20010;&#37096;&#20998;&#30340;&#20195;&#30721;&#25105;&#35273;&#24471;&#24456;&#26377;&#24847;&#24605;&mdash;&mdash;&#20027;&#35201;&#26159;&#29992;&#24490;&#29615;&#26469;&#36880;&#27493;&#25191;&#34892;&#32534;&#35793;&#30340;&#21508;&#38454;&#27573;&#21160;&#20316;&#65292;&#25442;&#20570;&#26159;&#25105;&#30340;&#35805;&#65292;&#25105;&#21487;&#33021;&#20250;&#20889;&#22914;&#19979;&#30340;&#20195;&#30721;&#32467;&#26500;&#65306;
</p>
<div>

<pre><span>int</span> <span>ret</span> = 0;
<span>/* </span><span>do some thing </span><span>*/</span>
ret = Preproc();
<span>if</span> (ret &lt; 0) {                  <span>/* </span><span>error </span><span>*/</span>
    <span>return</span> ret;
}

ret = Lexana();
<span>if</span> (ret &lt; 0) {                  <span>/* </span><span>error </span><span>*/</span>
    <span>return</span> ret;
};

<span>/* </span><span>... </span><span>*/</span>
</pre>
</div>
<p>
&#24403;&#28982;&#65292;&#25105;&#36825;&#37324;&#32473;&#20986;&#30340;&#21453;&#38754;&#31034;&#20363;&#30001;&#20110;&#20869;&#23481;&#36739;&#23569;&#30340;&#32536;&#25925;&#65292;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#21457;&#29616;&#21487;&#20197;&#29992;&#24490;&#29615;&#26469;&#31616;&#21270;&#20195;&#30721;&#65292;&#36825;&#27491;&#26159;ucc&#37324;&#20570;&#30340;&#12290;&#22312;&#36825;&#20010;&#24490;&#29615;&#37324;&#65292;&#36890;&#36807;&#24490;&#29615;&#21464;&#37327;i&#26469;&#25511;&#21046;&#36825;&#20010;&#36827;&#31243;&#65292;&#23427;&#30340;&#21021;&#20540;&#26159; <b>PP_FILE</b> &#65292;&#36825;&#26159;&#19968;&#20010;&#26522;&#20030;&#24120;&#37327;&#65292;&#20854;&#23450;&#20041;&#20026;&#65306;
</p>
<div>

<pre><span>enum</span> { <span>C_FILE</span>, <span>PP_FILE</span>, <span>ASM_FILE</span>, <span>OBJ_FILE</span>, <span>LIB_FILE</span>, <span>EXE_FILE</span> };
</pre>
</div>
<p>
&#36825;&#20123;&#26522;&#20030;&#24120;&#37327;&#30340;&#20540;&#65292;&#20174;&#22823;&#21040;&#23567;&#65292;&#27491;&#22909;&#23545;&#24212;&#20102;C&#35821;&#35328;&#28304;&#31243;&#24207;&#30340;&#23436;&#25972;&#32534;&#35793;&#36807;&#31243;&#20013;&#21508;&#20010;&#38454;&#27573;&#30340;&#29983;&#25104;&#32467;&#26524;&#25991;&#20214;&#31867;&#22411;&#65292;&#22240;&#27492;&#36890;&#36807;&#36825;&#20010;&#24490;&#29615;&#23601;&#33021;&#23436;&#25104;&#25972;&#20010;&#27969;&#31243;&#20102;&#65292;&#32780;&#19988;&#36827;&#34892;&#21040;&#21738;&#20010;&#38454;&#27573;&#20063;&#21487;&#20197;&#31616;&#21333;&#22320;&#36890;&#36807;&#20840;&#23616;&#21464;&#37327; <b>Option</b> &#30340;&#25104;&#21592; <b>oftype</b> &#26469;&#36827;&#34892;&#25511;&#21046;&mdash;&mdash;&#36825;&#20010;&#20840;&#23616;&#21464;&#37327;&#30340;&#25104;&#21592;&#30340;&#20540;&#21487;&#20197;&#36890;&#36807;&#25191;&#34892;ucc&#26102;&#30340;&#21442;&#25968;&#26469;&#25511;&#21046;&#12290;
</p>

<p>
&#21999;&#65292;&#20170;&#22825;&#23601;&#21040;&#36825;&#37324;&#21862;&#12290;
</p>
</div>
</div>
</div>