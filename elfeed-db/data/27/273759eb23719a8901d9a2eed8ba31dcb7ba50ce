<div>
<h2>&#30446;&#24405;</h2>
<div>
<ul>
<li><a href="http://www.zmonster.me#org17ae8b4" rel="noopener noreferrer" target="_blank">&#22522;&#30784;&#37197;&#32622;</a></li>
<li><a href="http://www.zmonster.me#orgdee9213" rel="noopener noreferrer" target="_blank">Emacs + Python3 &#30340;&#38382;&#39064;</a></li>
<li><a href="http://www.zmonster.me#org56179ba" rel="noopener noreferrer" target="_blank">company + jedi-core &#30340; Python3 &#37197;&#32622;</a></li>
<li><a href="http://www.zmonster.me#org10dd21d" rel="noopener noreferrer" target="_blank">&#32467;&#21512; virtualenv &#26469;&#20351;&#29992; flycheck</a></li>
<li><a href="http://www.zmonster.me#org27ebd7d" rel="noopener noreferrer" target="_blank">PEP8 &#30340;&#25903;&#25345;</a></li>
</ul>
</div>
</div>

<div>
<h2>&#22522;&#30784;&#37197;&#32622;</h2>
<div>
<p>
&#22522;&#30784;&#37197;&#32622;&#23601;&#27809;&#21861;&#22909;&#35828;&#30340;&#20102;&#65292;&#23601;&#26159;&#32553;&#36827;&#23485;&#24230;&#21862;&#65292;&#21508;&#31181; minor-mode &#30340;&#28155;&#21152;&#21862;&#20043;&#31867;&#30340;&#65292;&#30452;&#25509;&#19978;&#37197;&#32622;
</p>
<div>
<pre>(<span>defun</span> <span>my-python-mode-config</span> ()
  (<span>setq</span> python-indent-offset 4
        python-indent 4
        indent-tabs-mode nil
        default-tab-width 4

        <span>;; </span><span>&#35774;&#32622; run-python &#30340;&#21442;&#25968;</span>
        python-shell-interpreter <span>"ipython"</span>
        python-shell-interpreter-args <span>"-i"</span>
        python-shell-prompt-regexp <span>"In \\[[0-9]+\\]: "</span>
        python-shell-prompt-output-regexp <span>"Out\\[[0-9]+\\]: "</span>
        python-shell-completion-setup-code <span>"from IPython.core.completerlib import module_completion"</span>
        python-shell-completion-module-string-code <span>"';'.join(module_completion('''%s'''))\n"</span>
        python-shell-completion-string-code <span>"';'.join(get_ipython().Completer.all_completions('''%s'''))\n"</span>)

  (add-to-list 'auto-mode-alist '(<span>"\\.py\\'"</span> . python-mode))
  (hs-minor-mode t)                     <span>;</span><span>&#24320;&#21551; hs-minor-mode &#20197;&#25903;&#25345;&#20195;&#30721;&#25240;&#21472;</span>
  (auto-fill-mode 0)                    <span>;</span><span>&#20851;&#38381; auto-fill-mode&#65292;&#25298;&#32477;&#33258;&#21160;&#25240;&#34892;</span>
  (whitespace-mode t)                   <span>;</span><span>&#24320;&#21551; whitespace-mode &#23545;&#21046;&#34920;&#31526;&#21644;&#34892;&#20026;&#31354;&#26684;&#39640;&#20142;</span>
  (hl-line-mode t)                      <span>;</span><span>&#24320;&#21551; hl-line-mode &#23545;&#24403;&#21069;&#34892;&#36827;&#34892;&#39640;&#20142;</span>
  (pretty-symbols-mode t)               <span>;</span><span>&#24320;&#21551; pretty-symbols-mode &#23558; lambda &#26174;&#31034;&#25104;&#24076;&#33098;&#23383;&#31526; &lambda;</span>
  (set (make-local-variable 'electric-indent-mode) nil)) <span>;</span><span>&#20851;&#38381;&#33258;&#21160;&#32553;&#36827;</span>

(add-hook 'python-mode-hook 'my-python-mode-config)
</pre>
</div>

<p>
&#21478;&#22806;&#22914;&#26524;&#26159; Emacs 25.1 &#30340;&#35805;&#65292;&#26377;&#19968;&#20010;&#24050;&#30693; <a href="https://lists.gnu.org/archive/html/bug-gnu-emacs/2016-08/msg00230.html" rel="noopener noreferrer" target="_blank">bug</a>&#65292;&#20250;&#23548;&#33268;&#25191;&#34892; <b>run-python</b> &#30340;&#26102;&#20505;&#65292;python shell &#37324;&#26174;&#31034;&#19968;&#22534;&#20081;&#30721;&#65292;&#19979;&#38754;&#30340;&#26041;&#27861;&#33021;&#22815;&#35299;&#20915;
</p>
<div>
<pre>(setenv <span>"IPY_TEST_SIMPLE_PROMPT"</span> <span>"1"</span>)
</pre>
</div>
</div>
</div>

<div>
<h2>Emacs + Python3 &#30340;&#38382;&#39064;</h2>
<div>
<p>
&#20174;&#21435;&#24180;&#24320;&#22987;&#65292;&#22240;&#20026;&#24037;&#20316;&#30340;&#21407;&#22240;&#65292;&#26085;&#24120;&#30340;&#24320;&#21457;&#29615;&#22659;&#20174; Python2 &#20999;&#25442;&#25104;&#20102; Python3&#65292;&#19968;&#24320;&#22987;&#36824;&#26159;&#26377;&#19968;&#28857;&#19981;&#22826;&#20064;&#24815;&#30340;&#65292;&#20854;&#20013; Python &#26412;&#36523;&#30340;&#35821;&#27861;&#24046;&#24322;&#20498;&#30495;&#27809;&#26377;&#24102;&#26469;&#22826;&#22810;&#30340;&#19981;&#36866;&#24212;&#65292;&#19968;&#24320;&#22987;&#30340;&#25239;&#25298;&#20027;&#35201;&#36824;&#26159;&#22240;&#20026;&#19981;&#23569; Python &#30340;&#24211;&#22312;&#23545; Python3 &#30340;&#25903;&#25345;&#19978;&#22810;&#23569;&#26377;&#28857;&#38382;&#39064;&#12290;
</p>

<p>
&#24403;&#28982;&#65292;&#22240;&#20026;&#20844;&#21496;&#26159;&#29992; Python3 &#30340;&#65292;&#30896;&#21040;&#19978;&#36848;&#38382;&#39064;&#30340;&#26102;&#20505;&#23601;&#20250;&#21435;&#25214;&#26367;&#20195;&#26041;&#26696;&#20102;&#65292;&#21152;&#19978;&#20027;&#27969;&#30340;&#19968;&#20123;&#24211;&#20063;&#26377;&#20102;&#23545; Python3 &#30340;&#25903;&#25345;&#65292;&#25152;&#20197;&#29616;&#22312;&#24050;&#32463;&#20064;&#24815;&#20102;&#29992; Python3&#65292;&#32780;&#19988;&#26412;&#36523;&#26159;&#20174;&#20107; NLP &#30456;&#20851;&#30340;&#24037;&#20316;&#65292;&#35835;&#20889;&#25991;&#26412;&#30340;&#26102;&#20505;&#19981;&#29992;&#27599;&#27425;&#37117; encode/decode&#65292;&#36824;&#26159;&#25402;&#33298;&#26381;&#30340;&#12290;
</p>

<p>
Python2 &#36824;&#26159; Python3 &#36825;&#20010;&#23601;&#19981;&#24819;&#35752;&#35770;&#20102;&#65292;&#32593;&#19978;&#30456;&#20851;&#30340;&#35752;&#35770;&#20063;&#19981;&#23569;&#20102;&#12290;&#25105;&#36825;&#36793;&#30340;&#38382;&#39064;&#20027;&#35201;&#26159;&#65292;&#20999;&#25442;&#25104; Python3 &#21518;&#65292;&#21407;&#26469; Python &#30340;&#37197;&#32622;&#22810;&#23569;&#37117;&#26377;&#28857;&#38382;&#39064;&#65292;&#27604;&#22914;&#35821;&#27861;&#26816;&#26597;&#12289;&#33258;&#21160;&#34917;&#20840;&#31561;&#40664;&#35748;&#37117;&#26159;&#29992;&#31995;&#32479;&#30340; Python &#29615;&#22659;&#30340;&#65292;&#35201;&#22788;&#29702; Python3 &#30340;&#20195;&#30721;&#23601;&#38656;&#35201;&#39069;&#22806;&#20570;&#28857;&#20107;&#24773;&#65292;&#25105;&#36825;&#20010;&#20154;&#23454;&#22312;&#26159;&#25042;&#20110;&#26159;&#21435;&#25481;&#20102;&#35821;&#27861;&#26816;&#26597;&#12289;&#33258;&#21160;&#34917;&#20840;&#36825;&#20123;&#21151;&#33021;&#65292;&#23558;&#23601;&#30528;&#29992;&#30528;&#26368;&#22522;&#30784;&#30340;&#19968;&#20123;&#21151;&#33021;&#65292;&#20498;&#20063;&#19981;&#26159;&#19981;&#33021;&#36807;&#26085;&#23376;&#12290;
</p>

<p>
&#26377;&#26102;&#20505;&#20063;&#26377;&#32771;&#34385;&#37325;&#26032;&#37197;&#32622;&#19968;&#19979; Python &#29615;&#22659;&#65292;&#20294;&#26159;&#19968;&#30475;&#21040; elpy &#21834; projectile &#36825;&#20123;&#31245;&#24494;&#22797;&#26434;&#28857;&#30340; package &#23601;&#29359;&#25042;&#65292;&#20498;&#26159;&#36825;&#38453;&#23376;&#29992;&#19968;&#20123;&#26356;&#23567;&#30340; package &#19968;&#28857;&#19968;&#28857;&#22320;&#21152;&#26032;&#21151;&#33021;&#65292;&#35980;&#20284;&#20498;&#26159;&#24050;&#32463;&#35299;&#20915;&#20102;&#33258;&#24049;&#30340;&#38656;&#27714;&#20102;&#65292;&#21152;&#19978;&#26377;&#20123;&#26102;&#38388;&#27809;&#20889;&#19996;&#35199;&#20102;&#65292;&#24819;&#30528;&#20889;&#28857;&#19996;&#35199;&#65292;&#39034;&#20415;&#20998;&#20139;&#19979;&#36393;&#21040;&#30340;&#22353;&#21543;&#12290;
</p>
</div>
</div>

<div>
<h2>company + jedi-core &#30340; Python3 &#37197;&#32622;</h2>
<div>
<p>
&#39318;&#20808;&#26159;&#33258;&#21160;&#34917;&#20840;&#20102;&#65292;&#19968;&#24320;&#22987;&#26159;&#29992; <b>auto-complete</b> &#30340;&#65292;&#19981;&#36807;&#34987; auto-complete &#22353;&#36807;&#22826;&#22810;&#27425;&#20102;&#65292; <b>company</b> &#31639;&#26159;&#21518;&#36215;&#20043;&#31168;&#65292;&#37197;&#32622;&#36215;&#26469;&#20063;&#25402;&#26041;&#20415;&#30340;&#12290;
</p>

<p>
&#25226; company &#35013;&#19978;
</p>
<div>
<pre>(<span>when</span> (not (<span>require</span> '<span>company</span> nil <span>:noerror</span>))
  (message <span>"install company now..."</span>)
  (<span>setq</span> url-http-attempt-keepalives nil)
  (package-refresh-contents)
  (package-install 'company))
</pre>
</div>

<p>
&#28982;&#21518;&#22312;&#21551;&#21160; Emacs &#30340;&#26102;&#20505;&#24320;&#21551;&#20840;&#23616;&#30340; company-mode
</p>
<div>
<pre>(add-hook 'after-init-hook 'global-company-mode)
</pre>
</div>

<p>
company-mode &#40664;&#35748;&#24050;&#32463;&#37197;&#32622;&#22909;&#20102;&#22810;&#20010;&#35821;&#35328;&#30340; backends&#65292;&#22522;&#26412;&#19978;&#26159;&#24320;&#31665;&#21363;&#29992;&#30340;&#65292;&#26597;&#30475;&#21464;&#37327; company-backends &#21487;&#20197;&#30475;&#23427;&#24403;&#21069;&#20351;&#29992;&#30340; backends&#65292;&#40664;&#35748;&#26159;
</p>
<div>
<pre>(company-bbdb
 company-nxml
 company-css
 company-eclim
 company-semantic
 company-clang
 company-xcode
 company-cmake
 company-capf
 company-files
 (company-dabbrev-code company-gtags company-etags company-keywords)
 company-oddmuse company-dabbrev)
</pre>
</div>

<p>
&#36825;&#20123;&#24212;&#20184;&#19968;&#20123;&#31616;&#21333;&#30340;&#22330;&#26223;&#36275;&#22815;&#29992;&#20102;&#12290;
</p>

<p>
&#28982;&#21518;&#26159;&#23433;&#35013; <b>company-jedi</b>
</p>
<div>
<pre>(<span>when</span> (not (<span>require</span> '<span>company-jedi</span> nil <span>:noerror</span>))
  (message <span>"install company-jedi now..."</span>)
  (<span>setq</span> url-http-attempt-keepalives nil)
  (package-refresh-contents)
  (package-install 'company-jedi))
</pre>
</div>

<p>
company-jedi &#26159; company &#30340;&#19968;&#20010; backend&#65292;&#20351;&#29992; jedi &#36825;&#20010; Python &#30340;&#33258;&#21160;&#34917;&#20840;&#21644;&#38745;&#24577;&#20998;&#26512;&#24037;&#20855;&#12290;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#20351;&#29992; package-install &#23433;&#35013; company-jedi &#23601;&#22909;&#20102;&#65292;&#23427;&#20250;&#23433;&#35013; <b>jedi-core</b> &#36825;&#20010; package&#65292;&#37324;&#38754;&#26377;&#23545; jedi &#30340;&#23553;&#35013;&#12290;&#35828;&#36825;&#20010;&#26159;&#22240;&#20026;&#29992;&#25143;&#22914;&#26524;&#27809;&#26377;&#30475; company-jedi &#30340;&#35828;&#26126;&#65292;&#26377;&#21487;&#33021;&#20250;&#21435;&#23433;&#35013; jedi &#36825;&#20010; Emacs package&#65292;&#20294;&#23454;&#38469;&#19978;&#36825;&#20010; package &#26159;&#19968;&#20010; auto-complete &#30340;&#21518;&#31471;&#65292;&#23436;&#20840;&#19981;&#29992;&#12290;
</p>

<p>
&#21040;&#30446;&#21069;&#20026;&#27490;&#30340;&#25805;&#20316;&#37117;&#26159;&#36890;&#29992;&#30340;&#65292;&#21644; Python2/Python3 &#37117;&#27809;&#26377;&#20851;&#31995;&#65292;&#20294;&#35201;&#30693;&#36947;&#65292;jedi &#30340;&#24037;&#20316;&#21407;&#29702;&#26159;&#26681;&#25454;&#19968;&#20010; Python &#29615;&#22659;&#37324;&#30340;&#26631;&#20934;&#24211;&#21450;&#23433;&#35013;&#30340;&#38750;&#26631;&#20934;&#24211;&#26469;&#36827;&#34892;&#34917;&#20840;&#30340;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#23427;&#38656;&#35201;&#20381;&#36182;&#19968;&#20010;&#22806;&#37096;&#30340; Python &#29615;&#22659;&#65292;&#22914;&#26524;&#21435;&#30475; emacs-jedi &#30340;&#25991;&#26723;&#65292;&#20250;&#30475;&#21040;&#35201;&#27714;&#29992;&#25143;&#25191;&#34892; jedi:install-server &#26469;&#24314;&#31435;&#19968;&#20010; Python &#29615;&#22659;&#65292;&#32780;&#36825;&#20010;&#21629;&#20196;&#23454;&#38469;&#19978;&#20250;&#22312; ~/.emacs.d/.python-environments &#36825;&#20010;&#30446;&#24405;&#19979;&#24314;&#31435;&#19968;&#20010; virtualenv &#29615;&#22659;&#65292;&#40664;&#35748;&#29992;&#30340;&#26159; Python2.7&#12290;
</p>

<p>
&#25152;&#20197;&#22914;&#26524;&#24819;&#20026; Python3 &#37197;&#32622; jedi&#65292;&#35831;&#27880;&#24847; <b>&#19981;&#35201;&#20351;&#29992; jedi:install-server &#36825;&#31181;&#26041;&#24335;</b> &#12290;
</p>

<p>
&#26082;&#28982;&#30693;&#36947;&#20102; emacs-jedi &#30340;&#24037;&#20316;&#21407;&#29702;&#65292;&#37027;&#23601;&#22909;&#21150;&#20102;&#65292;&#37027;&#25105;&#23601;&#33258;&#24049;&#22312; ~/.emacs.d/.python-environments &#36825;&#20010;&#30446;&#24405;&#19979;&#24314;&#31435;&#19968;&#20010; Python3 &#30340; virtualenv &#29615;&#22659;&#21591;&#12290;
</p>

<p>
&#39318;&#20808;&#24314;&#31435; ~/.emacs.d/.python-environments/ &#36825;&#20010;&#30446;&#24405;
</p>
<div>
<pre>mkdir -p ~/.emacs.d/.python-environments/
</pre>
</div>

<p>
&#28982;&#21518;&#22312;&#20854;&#20013;&#21019;&#24314; virtualenv &#29615;&#22659;&#65292;&#19979;&#38754;&#30340;&#31034;&#20363;&#20013;&#20026;&#36825;&#20010; virtualenv &#29615;&#22659;&#21629;&#21517;&#20026; jedi&#65292;&#21462;&#21035;&#30340;&#21517;&#23383;&#37117;&#21487;&#20197;&#30340;
</p>
<div>
<pre><span>cd</span> ~/.emacs.d/.python-environments/
virtualenv -p /usr/bin/python3  --prompt=<span>"&lt;venv:jedi&gt;"</span> jedi
</pre>
</div>

<p>
&#28982;&#21518;&#22312;&#36825;&#20010; virtualenv &#29615;&#22659;&#20013;&#23433;&#35013;&#38656;&#35201;&#30340; Python &#20381;&#36182;&#65292;&#20381;&#36182;&#20998;&#20004;&#37096;&#20998;&#65292;&#19968;&#37096;&#20998;&#26159; jedi &#30456;&#20851;&#30340;&#20960;&#20010; Python &#21253;&#65292;&#26159;&#33258;&#21160;&#34917;&#20840;&#24517;&#39035;&#30340;&#65292;&#36825;&#20123;&#19996;&#35199;&#37117;&#22312; jedi-core &#36825;&#20010; Emacs package &#37324;&#30340; setup.py &#37324;&#20889;&#22909;&#20102;&#65292;&#20854;&#20869;&#23481;&#22914;&#19979;
</p>
<div>
<pre>setup(
    name=<span>'jediepcserver'</span>,
    version=<span>'0.2.7'</span>,
    py_modules=[<span>'jediepcserver'</span>],
    install_requires=[
        <span>"jedi&gt;=0.8.1"</span>,
        <span>"epc&gt;=0.0.4"</span>,
        <span>"argparse"</span>,
    ],
    entry_points={
        <span>'console_scripts'</span>: [<span>'jediepcserver = jediepcserver:main'</span>],
    },
    **args
)
</pre>
</div>

<p>
&#21487;&#20197;&#30475;&#21040;&#65292;&#20381;&#36182;&#30340;&#26159; jedi &#21644; epc &#20004;&#20010; Python &#21253;&#65292;&#25105;&#20204;&#21487;&#20197;&#25163;&#21160;&#23433;&#35013;&#23427;&#20204;
</p>
<div>
<pre>~/.emacs.d/.python-environments/jedi/bin/pip install jedi&gt;=0.8.1 epc&gt;=0.0.4 argparse
</pre>
</div>

<p>
&#20063;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;&#36825;&#20010; setup.py &#26469;&#23433;&#35013;
</p>
<div>
<pre>~/.emacs.d/.python-environments/jedi/bin/pip install --upgrade ~/.emacs.d/elpa/jedi-core-20170319.2107/
</pre>
</div>

<p>
&#20854;&#27425;&#26159;&#38656;&#35201;&#29992;&#20110;&#34917;&#20840;&#30340; Python &#30340;&#38750;&#26631;&#20934;&#24211;&#65292;&#27604;&#22914;&#35828;&#25105;&#32463;&#24120;&#29992; sklearn&#12289;tensorflow &#20043;&#31867;&#30340;&#24037;&#20855;&#65292;&#25105;&#24819;&#22312;&#20889;&#30456;&#20851;&#30340;&#20195;&#30721;&#30340;&#26102;&#20505;&#33021;&#34917;&#20840;&#65292;&#37027;&#20040;&#35201;&#22312;&#25105;&#20204;&#21018;&#25165;&#24314;&#31435;&#22909;&#30340; virtualenv &#29615;&#22659;&#37324;&#23433;&#35013;&#22909;&#36825;&#20123; Python &#21253;&#12290;
</p>
<div>
<pre>~/.emacs.d/.python-environments/jedi/bin/pip install <span>tensorflow</span>==1.3.0 <span>scipy</span>==0.19.1 <span>numy</span>==1.13.1 scikit-learn==0.19.0
</pre>
</div>

<p>
&#33267;&#27492;&#22806;&#37096;&#30340;&#35774;&#32622;&#37117;&#24050;&#32463;&#22909;&#20102;&#65292;&#28982;&#21518;&#23601;&#26159;&#35201;&#22312; Emacs &#37324;&#35774;&#32622;&#26469;&#20351;&#29992;&#25105;&#20204;&#21018;&#25165;&#24314;&#31435;&#22909;&#30340;&#36825;&#20010; virtualenv &#29615;&#22659;
</p>
<div>
<pre>(<span>setq</span> jedi:environment-root <span>"jedi"</span>)
(<span>setq</span> jedi:server-command (jedi:-env-server-command))
</pre>
</div>

<p>
&#28982;&#21518;&#35774;&#32622;&#24403;&#25171;&#24320; Python &#20195;&#30721;&#25991;&#20214;&#30340;&#26102;&#20505;&#65292;&#21551;&#21160; jedi
</p>
<div>
<pre>(<span>defun</span> <span>config/enable-jedi</span> ()
  (add-to-list 'company-backends 'company-jedi))
(add-hook 'python-mode-hook 'jedi:setup)
(add-hook 'python-mode-hook 'config/enable-jedi)
</pre>
</div>

<p>
&#36824;&#26377;&#19968;&#20123;&#34917;&#20840;&#30340;&#32454;&#33410;&#21487;&#20197;&#35774;&#32622;&#65292;&#22914;
</p>
<ul>
<li><p>
&#36755;&#20837;&#21477;&#28857;&#31526;&#21495; "." &#30340;&#26102;&#20505;&#33258;&#21160;&#24377;&#20986;&#34917;&#20840;&#21015;&#34920;&#65292;&#36825;&#20010;&#20027;&#35201;&#26159;&#26041;&#20415;&#29992;&#26469;&#36873;&#25321; Python package &#30340;&#23376;&#27169;&#22359;&#25110;&#32773;&#26041;&#27861;
</p>

<div>
<pre>(<span>setq</span> jedi:complete-on-dot t)
</pre>
</div></li>

<li><p>
&#34917;&#20840;&#26102;&#33021;&#35782;&#21035;&#31616;&#20889;&#65292;&#36825;&#20010;&#26159;&#35828;&#22914;&#26524;&#25105;&#20889;&#20102; "import tensorflow as tf" &#65292;&#37027;&#20040;&#25105;&#20877;&#36755;&#20837; "tf." &#30340;&#26102;&#20505;&#33021;&#33258;&#21160;&#34917;&#20840;
</p>

<div>
<pre>(<span>setq</span> jedi:use-shortcuts t)
</pre>
</div></li>

<li><p>
&#35774;&#32622;&#34917;&#20840;&#26102;&#38656;&#35201;&#30340;&#26368;&#23567;&#23383;&#25968;(&#40664;&#35748;&#23601;&#26159; 3)
</p>

<div>
<pre>(<span>setq</span> compandy-minimum-prefix-length 3)
</pre>
</div></li>

<li><p>
&#35774;&#32622;&#24377;&#20986;&#30340;&#34917;&#20840;&#21015;&#34920;&#30340;&#22806;&#35266;
</p>

<p>
&#35753;&#34917;&#20840;&#21015;&#34920;&#37324;&#30340;&#21508;&#39033;&#24038;&#21491;&#23545;&#40784;
</p>
<div>
<pre>(<span>setq</span> company-tooltip-align-annotations t)
</pre>
</div>

<p>
&#22914;&#26524;&#24320;&#21551;&#36825;&#20010;&#65292;&#37027;&#20040;&#34917;&#20840;&#21015;&#34920;&#20250;&#26159;&#19979;&#38754;&#36825;&#20010;&#26679;&#23376;
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/company-aligned-tooltip.png" alt="company-aligned-tooltip.png" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
&#40664;&#35748;&#26159;&#36825;&#20010;&#26679;&#23376;
</p>


<div>
<p><img src="http://www.zmonster.me/assets/img/company-default-tooltip.png" alt="company-default-tooltip.png" referrerpolicy="no-referrer" loading="lazy">
</p>
</div>

<p>
&#34917;&#20840;&#21015;&#34920;&#37324;&#30340;&#39033;&#25353;&#29031;&#20351;&#29992;&#30340;&#39057;&#27425;&#25490;&#24207;&#65292;&#36825;&#26679;&#32463;&#24120;&#20351;&#29992;&#21040;&#30340;&#20250;&#25918;&#22312;&#21069;&#38754;&#65292;&#20943;&#23569;&#25353;&#38190;&#27425;&#25968;
</p>
<div>
<pre>(<span>setq</span> company-transformers '(company-sort-by-occurrence))
</pre>
</div>

<p>
&#22312;&#24377;&#20986;&#30340;&#34917;&#20840;&#21015;&#34920;&#37324;&#31227;&#21160;&#26102;&#21487;&#20197;&#21069;&#21518;&#24490;&#29615;&#65292;&#40664;&#35748;&#22914;&#26524;&#31227;&#21160;&#21040;&#20102;&#26368;&#21518;&#19968;&#20010;&#26159;&#27809;&#26377;&#21150;&#27861;&#20877;&#24448;&#19979;&#31227;&#21160;&#30340;
</p>
<div>
<pre>(<span>setq</span> company-selection-wrap-around t)
</pre>
</div></li>

<li><p>
&#23545;&#40664;&#35748;&#24555;&#25463;&#38190;&#20570;&#19968;&#20123;&#20462;&#25913;
</p>

<p>
&#40664;&#35748;&#20351;&#29992; M-n &#21644; M-p &#26469;&#22312;&#34917;&#20840;&#21015;&#34920;&#37324;&#31227;&#21160;&#65292;&#25913;&#25104; C-n &#21644; C-p
</p>
<div>
<pre>(define-key company-active-map (kbd <span>"M-n"</span>) nil)
(define-key company-active-map (kbd <span>"M-p"</span>) nil)
(define-key company-active-map (kbd <span>"C-n"</span>) 'company-select-next)
(define-key company-active-map (kbd <span>"C-p"</span>) 'company-select-previous)
</pre>
</div>

<p>
&#35774;&#32622;&#35753; TAB &#20063;&#20855;&#22791;&#30456;&#21516;&#30340;&#21151;&#33021;
</p>
<div>
<pre>(define-key company-active-map (kbd <span>"TAB"</span>) 'company-complete-common-or-cycle)
(define-key company-active-map (kbd <span>"&lt;tab&gt;"</span>) 'company-complete-common-or-cycle)
(define-key company-active-map (kbd <span>"S-TAB"</span>) 'company-select-previous)
(define-key company-active-map (kbd <span>"&lt;backtab&gt;"</span>) 'company-select-previous)
</pre>
</div></li>
</ul>
</div>
</div>

<div>
<h2>&#32467;&#21512; virtualenv &#26469;&#20351;&#29992; flycheck</h2>
<div>
<p>
&#39318;&#20808;&#25105;&#20204;&#35201;&#23433;&#35013; <b>flycheck</b> &#36825;&#20010;&#23454;&#26102;&#35821;&#27861;&#26816;&#26597;&#24037;&#20855;
</p>
<div>
<pre>(<span>when</span> (not (<span>require</span> '<span>flycheck</span> nil <span>:noerror</span>))
  (message <span>"install flycheck now..."</span>)
  (<span>setq</span> url-http-attempt-keepalives nil)
  (package-refresh-contents)
  (package-install 'flycheck))
</pre>
</div>

<p>
&#22312; python-mode &#37324;&#21551;&#29992;&#20063;&#24456;&#31616;&#21333;
</p>
<div>
<pre>(<span>defun</span> <span>config/enable-flycheck</span> ()
  (flycheck-mode t))
(add-hook 'python-mode-hook 'config/enable-flycheck)
</pre>
</div>

<p>
flycheck &#20351;&#29992; pylint &#26469;&#23545;&#20195;&#30721;&#36827;&#34892;&#35821;&#27861;&#21644;&#20195;&#30721;&#35268;&#33539;&#30340;&#26816;&#26597;&#65292;&#23454;&#38469;&#19978;&#20250;&#20351;&#29992; <b>executable-find</b> &#36825;&#20010;&#26041;&#27861;&#26469;&#30830;&#23450;&#20351;&#29992;&#30340; pylint
</p>
<div>
<pre>(<span>defcustom</span> <span>flycheck-executable-find</span> #'executable-find
  <span>"Function to search for executables.</span>

<span>The value of this option is a function which is given the name or</span>
<span>path of an executable and shall return the full path to the</span>
<span>executable, or nil if the executable does not exit.</span>

<span>The default is the standard `</span><span>executable-find</span><span>' function which</span>
<span>searches `</span><span>exec-path</span><span>'.  You can customize this option to search</span>
<span>for checkers in other environments such as bundle or NixOS</span>
<span>sandboxes."</span>
  <span>:group</span> 'flycheck
  <span>:type</span> '(choice (const <span>:tag</span> <span>"Search executables in `</span><span>exec-path</span><span>'"</span> executable-find)
                 (<span>function</span> <span>:tag</span> <span>"Search executables with a custom function"</span>))
  <span>:package-version</span> '(flycheck . <span>"0.25"</span>)
  <span>:risky</span> t)
</pre>
</div>

<p>
&#32780; executable-find &#30340;&#24037;&#20316;&#21407;&#29702;&#26159;&#20174; exec-path &#36825;&#20010;&#21464;&#37327;&#37324;&#21253;&#21547;&#30340;&#30340;&#36335;&#24452;&#19979;&#23547;&#25214;&#23545;&#24212;&#30340;&#21487;&#25191;&#34892;&#31243;&#24207;
</p>
<div>
<pre>(<span>defun</span> <span>executable-find</span> (command)
  <span>"Search for COMMAND in `</span><span>exec-path</span><span>' and return the absolute file name.</span>
<span>Return nil if COMMAND is not found anywhere in `</span><span>exec-path</span><span>'."</span>
  <span>;; </span><span>Use 1 rather than file-executable-p to better match the behavior of</span>
  <span>;; </span><span>call-process.</span>
  (locate-file command exec-path exec-suffixes 1))
</pre>
</div>

<p>
&#22914;&#26524;&#21482;&#26159;&#20026;&#20102;&#25903;&#25345; Python3&#65292;&#37027;&#20040;&#25105;&#20204;&#21487;&#20197;&#33258;&#24049;&#24314;&#31435;&#19968;&#20010; Python3 &#30340; virtualenv&#65292;&#28982;&#21518;&#23558;&#20854;&#36335;&#24452;&#21152;&#21040; exec-path &#30340;&#26368;&#21069;&#38754;
</p>
<div>
<pre>(<span>push</span> <span>"&lt;YOUR PYTHON3 VENV&gt;/bin/"</span> exec-path)
</pre>
</div>

<p>
&#24403;&#28982;&#35760;&#24471;&#22312;&#37324;&#38754;&#23433;&#35013; pylint&#65292;&#19981;&#28982;&#36824;&#26159;&#20250;&#29992;&#31995;&#32479;&#29615;&#22659;&#20063;&#23601;&#26159; Python2 &#29615;&#22659;&#37324;&#30340; pylint&#12290;
</p>

<p>
&#36825;&#31181;&#26041;&#27861;&#21487;&#20197; work&#65292;&#20294;&#26159;&#20250;&#26377;&#19981;&#26041;&#20415;&#30340;&#22320;&#26041;&#65292;&#27604;&#22914;&#35828;&#25105;&#26377;&#26102;&#20505;&#20063;&#26377;&#21487;&#33021;&#20250;&#20889; Python2 &#20195;&#30721;&#65292;&#36935;&#21040; Python3 &#24050;&#32463;&#19981;&#20860;&#23481;&#30340;&#35821;&#27861;&#65292;&#19978;&#36848;&#26041;&#27861;&#20250;&#23548;&#33268; flycheck &#35748;&#20026;&#26159;&#35821;&#27861;&#38169;&#35823;&#12290;&#21478;&#22806;&#19968;&#20010;&#23601;&#26159;&#65292;&#27604;&#36739;&#33391;&#22909;&#30340;&#24320;&#21457;&#20064;&#24815;&#65292;&#26159;&#29992; virtualenv &#38548;&#31163;&#24320;&#27599;&#20010;&#39033;&#30446;&#30340;&#20381;&#36182;&#65292;&#19981;&#21516;&#39033;&#30446;&#30340;&#21516;&#19968;&#20010;&#20381;&#36182;&#21487;&#33021;&#20250;&#29256;&#26412;&#19981;&#19968;&#26679;&#65292;&#36825;&#26679;&#30340;&#35805; flycheck &#22914;&#26524;&#21482;&#20351;&#29992;&#38745;&#24577;&#30340;&#29615;&#22659;&#23601;&#27809;&#26377;&#21150;&#27861;&#24212;&#20184;&#12290;
</p>

<p>
&#24403;&#28982;&#65292;&#19978;&#19968;&#33410;&#30340;&#33258;&#21160;&#34917;&#20840;&#29992;&#30340;&#26159;&#19968;&#20010;&#32479;&#19968;&#30340; virtualenv &#29615;&#22659;&#65292;&#20063;&#20250;&#26377;&#31867;&#20284;&#30340;&#38382;&#39064;&#65292;&#19981;&#36807;&#35201;&#25913;&#36215;&#26469;&#20250;&#40635;&#28902;&#19968;&#20123;&#65292;&#25152;&#20197;&#20808;&#30053;&#36807;&#12290;
</p>

<p>
flycheck &#30340;&#36825;&#20010;&#38382;&#39064;&#20498;&#26159;&#22909;&#35299;&#20915;&#65292;&#26082;&#28982;&#25105;&#27599;&#20010;&#39033;&#30446;&#37117;&#20250;&#26377;&#19968;&#20010;&#29420;&#31435;&#30340; virtualenv&#65292;&#37027;&#20040;&#33021;&#19981;&#33021;&#20570;&#21040;&#25105;&#25171;&#24320;&#23545;&#24212;&#39033;&#30446;&#30340;&#20195;&#30721;&#30340;&#26102;&#20505;&#23601;&#20351;&#29992;&#23545;&#24212;&#30340; virtualenv &#29615;&#22659;&#21602;&#65292;&#27604;&#22914;&#35828;&#23558;&#23545;&#24212;&#30340;&#36335;&#24452;&#28155;&#21152;&#21040; exec-path &#36825;&#20010;&#21015;&#34920;&#30340;&#21069;&#38754;&#65311;
</p>

<p>
&#31572;&#26696;&#26159;&#21487;&#20197;&#30340;&#65292;&#26041;&#27861;&#26159;&#20351;&#29992; <b>auto-virtualenvwrapper</b>,&#36825;&#20010; package &#21487;&#20197;&#26681;&#25454;&#24403;&#21069;&#30340;&#25991;&#20214;&#23547;&#25214;&#24403;&#21069;&#30446;&#24405;&#25110;&#32773;&#19978;&#32423;&#30446;&#24405;&#20013;&#30340; virtualenv &#29615;&#22659;&#65292;&#28982;&#21518;&#21551;&#29992;&#12290;
</p>
<div>
<pre>(<span>when</span> (not (<span>require</span> '<span>auto-virtualenvwrapper</span> nil <span>:noerror</span>))
  (message <span>"install auto-virtualenvwrapper now..."</span>)
  (<span>setq</span> url-http-attempt-keepalives nil)
  (package-refresh-contents)
  (package-install 'auto-virtualenvwrapper))
</pre>
</div>

<p>
&#28982;&#21518;&#35774;&#32622;&#19968;&#19979;&#22312; python-mode &#37324;&#21551;&#29992;&#23427;
</p>
<div>
<pre>(add-hook 'python-mode-hook #'auto-virtualenvwrapper-activate)
</pre>
</div>

<p>
&#21487;&#20197;&#20570;&#21040;&#20999;&#25442; buffer &#30340;&#26102;&#20505;&#33258;&#21160;&#20999;&#25442;&#23545;&#24212;&#30340; virtualenv &#29615;&#22659;
</p>
<div>
<pre>(add-hook 'window-configuration-change-hook #'auto-virtualenvwrapper-activate)
</pre>
</div>

<p>
&#28982;&#21518;&#25105;&#20204;&#35201;&#20445;&#35777; flycheck &#20250;&#22312;&#36825;&#20010; virtualenv &#29615;&#22659;&#37324;&#21435;&#23547;&#25214; pylint&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#25105;&#20204;&#35201;&#20020;&#26102;&#20462;&#25913;&#19968;&#19979; exec-path &#30340;&#20540;
</p>
<div>
<pre>(<span>declare-function</span> python-shell-calculate-exec-path <span>"python"</span>)

(<span>defun</span> <span>flycheck-virtualenv-executable-find</span> (executable)
  <span>"Find an EXECUTABLE in the current virtualenv if any."</span>
  (<span>if</span> (<span>bound-and-true-p</span> python-shell-virtualenv-root)
      (<span>let</span> ((exec-path (python-shell-calculate-exec-path)))
        (executable-find executable))
    (executable-find executable)))

(<span>defun</span> <span>flycheck-virtualenv-setup</span> ()
  <span>"Setup Flycheck for the current virtualenv."</span>
  (<span>setq-local</span> flycheck-executable-find #'flycheck-virtualenv-executable-find))
</pre>
</div>

<p>
&#27880;&#65306;&#19978;&#36848;&#20195;&#30721;&#26469;&#33258;<a href="https://github.com/lunaryorn/old-emacs-configuration/blob/master/lisp/flycheck-virtualenv.el" rel="noopener noreferrer" target="_blank">lunaryorn &#30340;&#37197;&#32622;</a>
</p>
</div>
</div>

<div>
<h2>PEP8 &#30340;&#25903;&#25345;</h2>
<div>
<p>
&#19978;&#38754;&#37197;&#32622;&#22909;&#30340; flycheck &#25152;&#20570;&#30340;&#35821;&#27861;&#26816;&#26597;&#21644;&#38745;&#24577;&#20998;&#26512;&#65292;&#23545;&#20110;&#19981;&#31526;&#21512; PEP8 &#35268;&#33539;&#30340;&#35821;&#21477;&#24050;&#32463;&#20250;&#20570;&#19968;&#20123;&#25552;&#31034;&#20102;&#65292;&#19981;&#36807;&#35828;&#23454;&#35805;&#65292;&#19968;&#20123;&#19996;&#35199;&#25105;&#20204;&#21487;&#33021;&#24182;&#19981;&#24819;&#22312;&#19978;&#38754;&#21270;&#22826;&#22810;&#31934;&#21147;&#65292;&#36816;&#31639;&#31526;&#21069;&#21518;&#19968;&#20010;&#31354;&#26684;&#21862;&#12289;&#20989;&#25968;&#20043;&#38388;&#31354;&#20004;&#34892;&#21862;&#12289;&#31867;&#20869;&#26041;&#27861;&#20043;&#38388;&#31354;&#19968;&#34892;&#21862;&#20043;&#31867;&#30340;&#65292;&#20854;&#23454;&#21487;&#20197;&#38752; <b>py-autopep8</b> &#26469;&#26684;&#24335;&#21270;&#20195;&#30721;&#33258;&#21160;&#23436;&#25104;&#12290;
</p>

<p>
&#23433;&#35013;&#30456;&#24212;&#30340; Emacs package
</p>
<div>
<pre>(<span>when</span> (not (<span>require</span> '<span>py-autopep8</span> nil <span>:noerror</span>))
  (message <span>"install autopep8 now..."</span>)
  (<span>setq</span> url-http-attempt-keepalives nil)
  (package-refresh-contents)
  (package-install 'py-autopep8))
</pre>
</div>

<p>
&#24403;&#28982;&#23427;&#20854;&#23454;&#26159;&#20351;&#29992;&#30340; Python &#30340; autopep8 &#36825;&#20010;&#22806;&#37096;&#24037;&#20855;&#65292;&#25152;&#20197;&#20063;&#38656;&#35201;&#23433;&#35013;&#23427;
</p>
<div>
<pre>pip install autopep8
</pre>
</div>

<p>
&#28982;&#21518;&#22312; python-mode &#37324;&#21551;&#29992;&#23601;&#22909;&#20102;&#65292;&#19979;&#38754;&#30340;&#37197;&#32622;&#20250;&#35753; Emacs &#27599;&#27425;&#22312;&#20445;&#23384; Python &#25991;&#20214;&#30340;&#26102;&#20505;&#33258;&#21160;&#35843;&#29992; autopep8 &#36827;&#34892;&#26684;&#24335;&#21270;
</p>
<div>
<pre>(add-hook 'python-mode-hook 'py-autopep8-enable-on-save)
</pre>
</div>

<p>
&#24403;&#28982;&#25105;&#20204;&#20063;&#21487;&#20197;&#39069;&#22806;&#35774;&#32622;&#19968;&#20123;&#21442;&#25968;&#65292;&#27604;&#22914;&#40664;&#35748;&#30340;&#19968;&#20010;&#26631;&#20934;&#26159;&#27599;&#34892;&#26368;&#22823;&#23383;&#31526;&#25968;&#20026; 80&#65292;&#22914;&#26524;&#36229;&#36807;&#20102;&#65292;&#26684;&#24335;&#21270;&#30340;&#26102;&#20505;&#20250;&#23558;&#35813;&#34892;&#25240;&#34892;&#12290;&#19979;&#38754;&#30340;&#37197;&#32622;&#21487;&#20197;&#35774;&#32622;&#20026; 100
</p>
<div>
<pre>(<span>setq</span> py-autopep8-options '(<span>"--max-line-length=100"</span>))
</pre>
</div>
</div>
</div>